import{_ as n,o as s,c as a,e as t}from"./app-f4290375.js";const p={},e=t(`<h2 id="å®‰è£…ç¨‹åºåŒ…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…ç¨‹åºåŒ…" aria-hidden="true">#</a> å®‰è£…ç¨‹åºåŒ…</h2><h3 id="åŸºç¡€åŠŸèƒ½åŒ…" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€åŠŸèƒ½åŒ…" aria-hidden="true">#</a> åŸºç¡€åŠŸèƒ½åŒ…</h3><p><code>.NET Frameworkç‰ˆæœ¬çš„åŒ…å› æ‰“åŒ…ç¯å¢ƒå¼‚å¸¸ï¼Œæ— æ³•æ­£å¸¸å‘å¸ƒæ›´æ–°ï¼Œç›®å‰æš‚æ—¶åœæ›´~</code></p><h4 id="net-framework-â‰¥-4-6-1" tabindex="-1"><a class="header-anchor" href="#net-framework-â‰¥-4-6-1" aria-hidden="true">#</a> .NET Framework â‰¥ 4.6.1</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PM<span class="token operator">&gt;</span> Install-Package Masuit.Tools.Net
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="net-standard-â‰¥-2-1-æˆ–åªæƒ³ä½¿ç”¨ä¸€äº›åŸºæœ¬åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#net-standard-â‰¥-2-1-æˆ–åªæƒ³ä½¿ç”¨ä¸€äº›åŸºæœ¬åŠŸèƒ½" aria-hidden="true">#</a> .NET Standard â‰¥ 2.1 æˆ–åªæƒ³ä½¿ç”¨ä¸€äº›åŸºæœ¬åŠŸèƒ½</h4><p><code>é€šç”¨é¡¹ç›®æ¨èé¦–é€‰åŒ…</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PM<span class="token operator">&gt;</span> Install-Package Masuit.Tools.Abstraction
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="net-core-â‰¥-2-1" tabindex="-1"><a class="header-anchor" href="#net-core-â‰¥-2-1" aria-hidden="true">#</a> .NET Core â‰¥ 2.1</h4><p><code>.NET Coreé¡¹ç›®æ¨èé¦–é€‰åŒ…</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PM<span class="token operator">&gt;</span> Install-Package Masuit.Tools.Core
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="net-framework-4-5ç‰¹ä¾›ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#net-framework-4-5ç‰¹ä¾›ç‰ˆ" aria-hidden="true">#</a> .NET Framework 4.5ç‰¹ä¾›ç‰ˆ</h4><p>è¯·æ³¨æ„ï¼š<code>è¿™æ˜¯.NET Framework 4.5çš„ä¸“ç”¨ç‰ˆæœ¬ï¼Œç›¸æ¯”4.6.1åŠ.NET Coreçš„ç‰ˆæœ¬ï¼Œé˜‰å‰²äº†Redisã€HTMLã€æ–‡ä»¶å‹ç¼©ã€ASP.NETæ‰©å±•ã€ç¡¬ä»¶ç›‘æµ‹ã€Sessionæ‰©å±•ç­‰ä¸€äº›åŠŸèƒ½ã€‚</code><strong>å¦‚æœä½ çš„é¡¹ç›®ç‰ˆæœ¬é«˜äº4.5ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ä¸Šè¿°ç‰ˆæœ¬çš„åŒ…ï¼Œä»¥äº«å—å®Œæ•´çš„åŠŸèƒ½ä½“éªŒï¼</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PM<span class="token operator">&gt;</span> Install-Package Masuit.Tools.Net45
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¢å€¼åŒ…" tabindex="-1"><a class="header-anchor" href="#å¢å€¼åŒ…" aria-hidden="true">#</a> å¢å€¼åŒ…</h3><h4 id="masuit-tools-aspnetcore" tabindex="-1"><a class="header-anchor" href="#masuit-tools-aspnetcore" aria-hidden="true">#</a> Masuit.Tools.AspNetCore</h4><p><code>AspNetCoreé¡¹ç›®æ¨èé¦–é€‰åŒ…</code> ASP.NET Core Webä¸“ç”¨åŒ…ï¼ŒåŒ…å«Masuit.Tools.Coreçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶ä¸”å¢åŠ äº†ä¸€äº›å¯¹ASP.NET Core WebåŠŸèƒ½çš„é¢å¤–æ”¯æŒã€‚</p><h4 id="masuit-tools-excel" tabindex="-1"><a class="header-anchor" href="#masuit-tools-excel" aria-hidden="true">#</a> Masuit.Tools.Excel</h4><p>Excelå¯¼å…¥å¯¼å‡ºçš„ä¸“ç”¨ç‹¬ç«‹åŒ…</p><h4 id="masuit-tools-nosql-mongodbclient" tabindex="-1"><a class="header-anchor" href="#masuit-tools-nosql-mongodbclient" aria-hidden="true">#</a> Masuit.Tools.NoSQL.MongoDBClient</h4><p>mongodbçš„å°è£…æ“ä½œç±»ç‹¬ç«‹åŒ…</p><h2 id="ä¸ºå·¥å…·åº“æ³¨å†Œé…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸ºå·¥å…·åº“æ³¨å†Œé…ç½®" aria-hidden="true">#</a> ä¸ºå·¥å…·åº“æ³¨å†Œé…ç½®</h2><p>å·¥å…·åº“éœ€è¦ç”¨åˆ°å¤–éƒ¨é…ç½®èŠ‚ï¼Œ.NET Frameworké¡¹ç›®é…ç½®åœ¨web.config/app.configçš„AppSettingsé…ç½®èŠ‚ä¸­ï¼Œ.NET Coreé¡¹ç›®é…ç½®åœ¨appsettings.jsonä¸­ï¼š</p><ol><li>EmailDomainWhiteListï¼Œé‚®ç®±æ ¡éªŒéœ€è¦ç”¨åˆ°çš„ç™½åå•åŸŸåï¼Œè‹±æ–‡é€—å·åˆ†éš”ï¼Œæ¯ä¸ªå…ƒç´ æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œè‹¥æœªé…ç½®ï¼Œåˆ™ä¸å¯ç”¨é‚®ç®±æ ¡éªŒç™½åå•ï¼Œç¤ºä¾‹: <code>&quot;^\\\\w{1,5}@qq.com,^\\\\w{1,5}@163.com,^\\\\w{1,5}@gmail.com,^\\\\w{1,5}@outlook.com&quot;</code></li><li>EmailDomainBlockListï¼Œé‚®ç®±æ ¡éªŒéœ€è¦ç”¨åˆ°çš„é»‘åå•åŸŸåï¼Œè‹±æ–‡é€—å·åˆ†éš”ï¼Œæ¯ä¸ªå…ƒç´ æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸”é»‘åå•ä¼˜å…ˆçº§é«˜äºç™½åå•ï¼Œè‹¥æœªé…ç½®ï¼Œåˆ™ä¸å¯ç”¨é‚®ç®±æ ¡éªŒé»‘ç™½åå•</li></ol><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    configuration<span class="token punctuation">.</span><span class="token function">AddToMasuitTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‹¥æœªè°ƒç”¨ï¼Œåˆ™é»˜è®¤è‡ªåŠ¨å°è¯•åŠ è½½appsettings.json</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç‰¹è‰²åŠŸèƒ½ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç‰¹è‰²åŠŸèƒ½ç¤ºä¾‹ä»£ç " aria-hidden="true">#</a> ç‰¹è‰²åŠŸèƒ½ç¤ºä¾‹ä»£ç </h2><h3 id="åœ¨çº¿ä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#åœ¨çº¿ä½“éªŒ" aria-hidden="true">#</a> åœ¨çº¿ä½“éªŒ</h3><p>https://replit.com/@ldqk/MasuitToolsDemo?v=1#main.cs</p><h3 id="_0-ä¸€äº›åˆ›æ„ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_0-ä¸€äº›åˆ›æ„ç±»å‹" aria-hidden="true">#</a> 0. ä¸€äº›åˆ›æ„ç±»å‹</h3><p><code>DisposableDictionary</code>ï¼šå¯è¢«Disposableçš„å­—å…¸ç±»å‹ï¼Œç”¨äºå­˜æ”¾Valueæ˜¯Disposableç±»å‹çš„æ•°æ®ï¼Œç”¨æ³•å’Œæ™®é€šå­—å…¸ä¸€è‡´</p><p><code>NullableConcurrentDictionary</code>/<code>NullableDictionary</code>ï¼šKeyå¯ä¸ºnullçš„å­—å…¸ç±»å‹ï¼Œç”¨æ³•å’Œæ™®é€šå­—å…¸ä¸€è‡´</p><p><code>ConcurrentHashSet</code>ï¼šå¹¶å‘HashSetï¼Œç”¨æ³•å’ŒHashSetä¸€è‡´</p><p><code>ConcurrentLimitedQueue</code>ï¼šå®šé•¿å¹¶å‘é˜Ÿåˆ—ï¼Œç‰¹ç‚¹æ˜¯é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œç”¨æ³•ä¸ConcurrentQueueä¸€è‡´</p><p><code>LimitedQueue</code>ï¼šå®šé•¿é˜Ÿåˆ—ï¼Œç‰¹ç‚¹æ˜¯é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œç”¨æ³•ä¸Queueä¸€è‡´</p><p><code>LargeMemoryStream</code>ï¼šè¶…å¤§å†…å­˜æµï¼Œæœ€å¤§å¯æ”¯æŒ1TBæ•°æ®ï¼Œæ¨èå½“æ•°æ®æµå¤§äº2GBæ—¶ä½¿ç”¨ï¼Œç”¨æ³•ä¸MemoryStreamä¸€è‡´</p><p><code>PooledMemoryStream</code>ï¼šæ± åŒ–å†…å­˜æµï¼Œå¯å†…å­˜å¤ç”¨ï¼Œç”¨æ³•ä¸MemoryStreamä¸€è‡´ï¼Œæ€§èƒ½æ¯”MemoryStreamå¥½</p><p><code>ITree&lt;T&gt;</code>ï¼šæ ‘å½¢å®ä½“æ¥å£çº¦æŸï¼Œå®ç°è¯¥æ¥å£å¯è®©ç±»å‹å®ç°ä¸€äº›æ ‘å½¢æ“ä½œ</p><p><code>ChineseCalendar</code>ï¼šä¸­å›½å†œå†ç±»å‹ï¼Œå¯ä»¥å®ç°å¤©å¹²åœ°æ”¯èŠ‚æ°”ç­‰æ•°æ®çš„è·å–</p><p><code>Clay</code>/<code>DynamicFactory</code>ï¼šç²˜åœŸåŠ¨æ€ç±»å‹ï¼Œå¯å®ç°ç±»ä¼¼jsçš„å¼±ç±»å‹ç¼–ç¨‹</p><p><code>RadarChart</code>ï¼šé›·è¾¾å›¾ç±»å‹ï¼Œå¯ç”¨äºåšæ•°æ®åˆ†ææˆ–ç”¨æˆ·è¡Œä¸ºç”»åƒ</p><p><code>Circle</code>ï¼šåœ†å½¢ç±»å‹ï¼Œå¯å®ç°âšªçš„ç›¸äº¤ç›¸åˆ‡ç›¸ç¦»çš„åˆ¤æ–­</p><p><code>Sphere</code>ï¼šçƒä½“ç±»å‹ï¼Œå¯å®ç°è®¡ç®—çƒä½“ä¸Šä¸¤ç‚¹çš„å¼§é•¿è®¡ç®—ï¼Œç›¸äº¤ç›¸åˆ‡ç›¸ç¦»çš„åˆ¤æ–­</p><p><code>MimeMapper</code>ï¼šmimeç±»å‹æ˜ å°„</p><p><code>VersionNumber</code>ï¼šç‰ˆæœ¬å·ç±»å‹ï¼Œæ¯”System.VersionåŠŸèƒ½æ›´å¤šä¸€ç‚¹ï¼Œç”¨æ³•ä¸€è‡´</p><p>å…·ä½“ç”¨æ³•ï¼Œå¯å‚é˜…åæ–‡è¯¦ç»†ç¤ºä¾‹ï¼š</p><h3 id="_1-æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦æ˜¯emailã€æ‰‹æœºå·ã€urlã€ipåœ°å€ã€èº«ä»½è¯å·ç­‰" tabindex="-1"><a class="header-anchor" href="#_1-æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦æ˜¯emailã€æ‰‹æœºå·ã€urlã€ipåœ°å€ã€èº«ä»½è¯å·ç­‰" aria-hidden="true">#</a> 1. æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦æ˜¯Emailã€æ‰‹æœºå·ã€URLã€IPåœ°å€ã€èº«ä»½è¯å·ç­‰</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">var</span> <span class="token punctuation">(</span>isMatch<span class="token punctuation">,</span> match<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;337845818@qq.com&quot;</span><span class="token punctuation">.</span><span class="token function">MatchEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åœ¨appsetting.jsonä¸­æ·»åŠ EmailDomainWhiteListå’ŒEmailDomainBlockListé…ç½®é‚®ç®±åŸŸåé»‘ç™½åå•ï¼Œé€—å·åˆ†éš”ï¼Œå¦‚&quot;EmailDomainBlockList&quot;: &quot;^\\\\w{1,5}@qq.com,^\\\\w{1,5}@163.com,^\\\\w{1,5}@gmail.com,^\\\\w{1,5}@outlook.com&quot;,</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isInetAddress <span class="token operator">=</span> <span class="token string">&quot;114.114.114.114&quot;</span><span class="token punctuation">.</span><span class="token function">MatchInetAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…IPåœ°å€</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isUrl <span class="token operator">=</span> <span class="token string">&quot;http://masuit.org/20/history&quot;</span><span class="token punctuation">.</span><span class="token function">MatchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…url</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isPhoneNumber <span class="token operator">=</span> <span class="token string">&quot;15205201520&quot;</span><span class="token punctuation">.</span><span class="token function">MatchPhoneNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…æ‰‹æœºå·</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isLandline <span class="token operator">=</span> <span class="token string">&quot;01088888888&quot;</span><span class="token punctuation">.</span><span class="token function">MatchLandline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…åº§æœºå·</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isIdentifyCard <span class="token operator">=</span> <span class="token string">&quot;312000199502230660&quot;</span><span class="token punctuation">.</span><span class="token function">MatchIdentifyCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¡éªŒä¸­å›½å¤§é™†èº«ä»½è¯å·</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isCNPatentNumber <span class="token operator">=</span> <span class="token string">&quot;200410018477.9&quot;</span><span class="token punctuation">.</span><span class="token function">MatchCNPatentNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ ¡éªŒä¸­å›½ä¸“åˆ©ç”³è¯·å·æˆ–ä¸“åˆ©å·ï¼Œæ˜¯å¦å¸¦æ ¡éªŒä½ï¼Œæ ¡éªŒä½å‰æ˜¯å¦å¸¦â€œ.â€ï¼Œéƒ½å¯ä»¥æ ¡éªŒï¼Œå¾…æ ¡éªŒçš„å·ç å‰ä¸è¦å¸¦CNã€ZLå­—æ ·çš„å‰ç¼€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ç¡¬ä»¶ç›‘æµ‹-ä»…æ”¯æŒwindows-éƒ¨åˆ†å‡½æ•°ä»…æ”¯æŒç‰©ç†æœºæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-ç¡¬ä»¶ç›‘æµ‹-ä»…æ”¯æŒwindows-éƒ¨åˆ†å‡½æ•°ä»…æ”¯æŒç‰©ç†æœºæ¨¡å¼" aria-hidden="true">#</a> 2.ç¡¬ä»¶ç›‘æµ‹(ä»…æ”¯æŒWindowsï¼Œéƒ¨åˆ†å‡½æ•°ä»…æ”¯æŒç‰©ç†æœºæ¨¡å¼)</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">float</span></span> load <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span>CpuLoad<span class="token punctuation">;</span><span class="token comment">// è·å–CPUå ç”¨ç‡</span>
<span class="token class-name"><span class="token keyword">long</span></span> physicalMemory <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span>PhysicalMemory<span class="token punctuation">;</span><span class="token comment">// è·å–ç‰©ç†å†…å­˜æ€»æ•°</span>
<span class="token class-name"><span class="token keyword">long</span></span> memoryAvailable <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span>MemoryAvailable<span class="token punctuation">;</span><span class="token comment">// è·å–ç‰©ç†å†…å­˜å¯ç”¨ç‡</span>
<span class="token class-name"><span class="token keyword">double</span></span> freePhysicalMemory <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetFreePhysicalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å¯ç”¨ç‰©ç†å†…å­˜</span>
<span class="token class-name"><span class="token keyword">double</span></span> temperature <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetCPUTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–CPUæ¸©åº¦</span>
<span class="token class-name"><span class="token keyword">int</span></span> cpuCount <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetCpuCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–CPUæ ¸å¿ƒæ•°</span>
<span class="token class-name"><span class="token keyword">var</span></span> ipAddress <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetLocalIPs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æœ¬æœºæ‰€æœ‰IPåœ°å€</span>
<span class="token class-name"><span class="token keyword">string</span></span> localUsedIp <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetLocalUsedIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æœ¬æœºå½“å‰æ­£åœ¨ä½¿ç”¨çš„IPåœ°å€</span>
<span class="token class-name">IList<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> macAddress <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetMacAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æœ¬æœºæ‰€æœ‰ç½‘å¡macåœ°å€</span>
<span class="token class-name"><span class="token keyword">string</span></span> osVersion <span class="token operator">=</span> Windows<span class="token punctuation">.</span><span class="token function">GetOsVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æ“ä½œç³»ç»Ÿç‰ˆæœ¬</span>
<span class="token class-name">RamInfo</span> ramInfo <span class="token operator">=</span> SystemInfo<span class="token punctuation">.</span><span class="token function">GetRamInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å†…å­˜ä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> cpuSN<span class="token operator">=</span>SystemInfo<span class="token punctuation">.</span><span class="token function">GetCpuInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>SerialNumber<span class="token punctuation">;</span> <span class="token comment">// CPUåºåˆ—å·</span>
<span class="token class-name"><span class="token keyword">var</span></span> driveSN<span class="token operator">=</span>SystemInfo<span class="token punctuation">.</span><span class="token function">GetDiskInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>SerialNumber<span class="token punctuation">;</span> <span class="token comment">// ç¡¬ç›˜åºåˆ—å·</span>

<span class="token comment">// å¿«é€Ÿæ–¹æ³•</span>
<span class="token class-name"><span class="token keyword">var</span></span> cpuInfos <span class="token operator">=</span> CpuInfo<span class="token punctuation">.</span>Locals<span class="token punctuation">;</span> <span class="token comment">// å¿«é€Ÿè·å–CPUçš„ä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> ramInfo <span class="token operator">=</span> RamInfo<span class="token punctuation">.</span>Local<span class="token punctuation">;</span> <span class="token comment">// å¿«é€Ÿè·å–å†…å­˜çš„ä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> diskInfos <span class="token operator">=</span> DiskInfo<span class="token punctuation">.</span>Locals<span class="token punctuation">;</span> <span class="token comment">// å¿«é€Ÿè·å–ç¡¬ç›˜çš„ä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> biosInfo <span class="token operator">=</span> BiosInfo<span class="token punctuation">.</span>Local<span class="token punctuation">;</span> <span class="token comment">// å¿«é€Ÿè·å–ä¸»æ¿çš„ä¿¡æ¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-htmlçš„é˜²xsså¤„ç†" tabindex="-1"><a class="header-anchor" href="#_3-htmlçš„é˜²xsså¤„ç†" aria-hidden="true">#</a> 3.htmlçš„é˜²XSSå¤„ç†ï¼š</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">string</span></span> html <span class="token operator">=</span> <span class="token string">@&quot;&lt;link href=&#39;/Content/font-awesome/css&#39; rel=&#39;stylesheet&#39;/&gt;
        &lt;!--[if IE 7]&gt;
        &lt;link href=&#39;/Content/font-awesome-ie7.min.css&#39; rel=&#39;stylesheet&#39;/&gt;
        &lt;![endif]--&gt;
        &lt;script src=&#39;/Scripts/modernizr&#39;&gt;&lt;/script&gt;
        &lt;div id=&#39;searchBox&#39; role=&#39;search&#39;&gt;
        &lt;form action=&#39;/packages&#39; method=&#39;get&#39;&gt;
        &lt;span class=&#39;user-actions&#39;&gt;&lt;a href=&#39;/users/account/LogOff&#39;&gt;é€€å‡º&lt;/a&gt;&lt;/span&gt;
        &lt;input name=&#39;q&#39; id=&#39;searchBoxInput&#39;/&gt;
        &lt;input id=&#39;searchBoxSubmit&#39; type=&#39;submit&#39; value=&#39;Submit&#39; /&gt;
        &lt;/form&gt;
        &lt;/div&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">HtmlSanitizerStandard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ¸…ç†åï¼š&lt;div&gt;&lt;span&gt;&lt;a href=&quot;/users/account/LogOff&quot;&gt;é€€å‡º&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">HtmlSanitizerCustom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‡ªå®šä¹‰æ¸…ç†</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-æ•´ç†windowsç³»ç»Ÿçš„å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_4-æ•´ç†windowsç³»ç»Ÿçš„å†…å­˜" aria-hidden="true">#</a> 4.æ•´ç†Windowsç³»ç»Ÿçš„å†…å­˜ï¼š</h3><p>ç±»ä¼¼äºå„å¤§ç³»ç»Ÿä¼˜åŒ–è½¯ä»¶çš„åŠ é€ŸçƒåŠŸèƒ½</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>Windows<span class="token punctuation">.</span><span class="token function">ClearMemorySilent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5-ä»»æ„è¿›åˆ¶è½¬æ¢-ä¸­æ–‡æ•°å­—" tabindex="-1"><a class="header-anchor" href="#_5-ä»»æ„è¿›åˆ¶è½¬æ¢-ä¸­æ–‡æ•°å­—" aria-hidden="true">#</a> 5.ä»»æ„è¿›åˆ¶è½¬æ¢/ä¸­æ–‡æ•°å­—</h3><h4 id="å¤§å†™æ•°å­—" tabindex="-1"><a class="header-anchor" href="#å¤§å†™æ•°å­—" aria-hidden="true">#</a> å¤§å†™æ•°å­—</h4><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> num<span class="token operator">=</span><span class="token number">123.45</span><span class="token punctuation">.</span><span class="token function">ToChineseMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å£¹ä½°è´°æ‹¾åå…ƒè‚†è§’ä¼åˆ†</span>
<span class="token class-name"><span class="token keyword">var</span></span> num<span class="token operator">=</span><span class="token number">123.45</span><span class="token punctuation">.</span><span class="token function">ToChineseNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€ç™¾äºŒåä¸‰ç‚¹å››äº”</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¿›åˆ¶è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#è¿›åˆ¶è½¬æ¢" aria-hidden="true">#</a> è¿›åˆ¶è½¬æ¢</h4><p>å¯ç”¨äºç”ŸæˆçŸ­idï¼ŒçŸ­hashï¼Œéšæœºå­—ç¬¦ä¸²ç­‰æ“ä½œï¼Œçº¯æ•°å­¦è¿ç®—ã€‚</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">NumberFormater</span> nf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberFormater</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å†…ç½®2-95è¿›åˆ¶çš„è½¬æ¢</span>
<span class="token comment">//NumberFormater nf = new NumberFormater(&quot;0123456789abcdefghijklmnopqrstuvwxyz&quot;);// è‡ªå®šä¹‰è¿›åˆ¶å­—ç¬¦ï¼Œå¯ç”¨äºç”ŸæˆéªŒè¯ç ï¼Œè‡ªå®šä¹‰å­—ç¬¦å¯æ”¯æŒä»»æ„è¿›åˆ¶ï¼Œä½ ä¼ 1wä¸ªå­—ç¬¦è¿›å»é‚£å°±æ”¯æŒä¸€ä¸‡è¿›åˆ¶(æ‰‹åŠ¨ç‹—å¤´)</span>
<span class="token class-name"><span class="token keyword">string</span></span> s36 <span class="token operator">=</span> nf<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token number">12345678</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">long</span></span> num <span class="token operator">=</span> nf<span class="token punctuation">.</span><span class="token function">FromString</span><span class="token punctuation">(</span><span class="token string">&quot;7clzi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;12345678çš„36è¿›åˆ¶æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> s36<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7clzi</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;36è¿›åˆ¶çš„7clziæ˜¯ï¼š&quot;</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12345678</span>
<span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberFormater</span><span class="token punctuation">(</span><span class="token number">91</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span>MaxValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é…åˆéšæœºæ•°ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">//æ‰©å±•æ–¹æ³•å½¢å¼è°ƒç”¨</span>
<span class="token class-name"><span class="token keyword">var</span></span> bin<span class="token operator">=</span><span class="token number">12345678</span><span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 10è¿›åˆ¶è½¬36è¿›åˆ¶ï¼š7clzi</span>
<span class="token class-name"><span class="token keyword">var</span></span> num<span class="token operator">=</span><span class="token string">&quot;7clzi&quot;</span><span class="token punctuation">.</span><span class="token function">FromBase</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 36è¿›åˆ¶è½¬10è¿›åˆ¶ï¼š12345678</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">//è¶…å¤§æ•°å­—çš„è¿›åˆ¶è½¬æ¢</span>
<span class="token class-name"><span class="token keyword">var</span></span> num <span class="token operator">=</span> <span class="token string">&quot;e6186159d38cd50e0463a55e596336bd&quot;</span><span class="token punctuation">.</span><span class="token function">FromBaseBig</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¤§æ•°å­—16è¿›åˆ¶è½¬10è¿›åˆ¶</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åè¿›åˆ¶ï¼š305849028665645097422198928560410015421</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 64è¿›åˆ¶ï¼š3C665pQUPl3whzFlVpoPqZï¼Œ22ä½é•¿åº¦</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 36è¿›åˆ¶ï¼šdmed4dkd5bhcg4qdktklun0zhï¼Œ25ä½é•¿åº¦</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7è¿›åˆ¶ï¼š2600240311641665565300424545154525131265221035ï¼Œ46ä½é•¿åº¦</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12è¿›åˆ¶ï¼š5217744842749978a756b22135b16a5998a5ï¼Œ36ä½é•¿åº¦</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">ToBase</span><span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 41è¿›åˆ¶ï¼šopzeBda2aytcEeudEquuesbkï¼Œ24ä½é•¿åº¦</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ æƒ³è®©è¿›åˆ¶ç¬¦æ”¯æŒemojiï¼ŒNumberFormateræ˜¯ä¸æ”¯æŒçš„ï¼Œä¸è¿‡å¦‚æœä½ ç¡®å®æœ‰è¿™ä¹ˆéªšçš„éœ€æ±‚ï¼Œæˆ‘è¿˜å‡†å¤‡äº†UnicodeFormaterç±»ï¼Œç”¨äºæ”¯æŒemojiï¼Œç”¨æ³•å’ŒNumberFormaterä¸€æ¨¡ä¸€æ ·ï¼Œå¹¶ä¸”ï¼ŒUnicodeFormaterçš„åŠŸèƒ½åŒ…å«NumberFormaterçš„åŠŸèƒ½ï¼Œä½†æ˜¯ï¼Œæ€§èƒ½æ¯”NumberFormaterå·®äº†è®¸å¤šã€‚</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> formater <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UnicodeFormater</span><span class="token punctuation">(</span><span class="token string">&quot;ğŸ˜€ğŸ˜ğŸ˜‚ğŸ¤£ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ğŸ˜ğŸ˜˜ğŸ¥°ğŸ˜—ğŸ˜™ğŸ¥²ğŸ˜šğŸ™‚ğŸ¤—ğŸ¤©ğŸ¤”ğŸ¤¨ğŸ˜‘ğŸ˜¶ğŸ˜¶â€ğŸŒ«ğŸ™„ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> formater<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token number">1234567890</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜„ğŸŒ«ğŸ˜¶ğŸ˜‹ğŸ˜‹</span>
<span class="token class-name"><span class="token keyword">var</span></span> num <span class="token operator">=</span> formater<span class="token punctuation">.</span><span class="token function">FromString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1234567890</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-çº³ç§’çº§æ€§èƒ½è®¡æ—¶å™¨" tabindex="-1"><a class="header-anchor" href="#_6-çº³ç§’çº§æ€§èƒ½è®¡æ—¶å™¨" aria-hidden="true">#</a> 6.çº³ç§’çº§æ€§èƒ½è®¡æ—¶å™¨</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">HiPerfTimer</span> timer <span class="token operator">=</span> HiPerfTimer<span class="token punctuation">.</span><span class="token function">StartNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//todo</span>
<span class="token punctuation">}</span>
timer<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œforå¾ªç¯100000æ¬¡è€—æ—¶&quot;</span><span class="token operator">+</span>timer<span class="token punctuation">.</span>Duration<span class="token operator">+</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">double</span></span> time <span class="token operator">=</span> HiPerfTimer<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//todo</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œforå¾ªç¯100000æ¬¡è€—æ—¶&quot;</span><span class="token operator">+</span>time<span class="token operator">+</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-äº§ç”Ÿåˆ†å¸ƒå¼å”¯ä¸€æœ‰åºçŸ­id-é›ªèŠ±id" tabindex="-1"><a class="header-anchor" href="#_7-äº§ç”Ÿåˆ†å¸ƒå¼å”¯ä¸€æœ‰åºçŸ­id-é›ªèŠ±id" aria-hidden="true">#</a> 7.äº§ç”Ÿåˆ†å¸ƒå¼å”¯ä¸€æœ‰åºçŸ­id(é›ªèŠ±id)</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// å®ä¾‹è°ƒç”¨</span>
<span class="token class-name"><span class="token keyword">var</span></span> sf <span class="token operator">=</span> SnowFlake<span class="token punctuation">.</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> id <span class="token operator">=</span> sf<span class="token punctuation">.</span><span class="token function">GetUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// rcofqodori0w</span>
<span class="token class-name"><span class="token keyword">var</span></span> sfn <span class="token operator">=</span> SnowFlakeNew<span class="token punctuation">.</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ”¹è‰¯ç‰ˆé›ªèŠ±idï¼Œå¯¹æ—¶é—´å›æ‹¨ä¸æ•æ„Ÿ</span>
<span class="token class-name"><span class="token keyword">string</span></span> id <span class="token operator">=</span> sfn<span class="token punctuation">.</span><span class="token function">GetUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// vmbq8q3s3zul</span>

<span class="token comment">// é™æ€è°ƒç”¨</span>
<span class="token class-name"><span class="token keyword">string</span></span> id <span class="token operator">=</span> SnowFlake<span class="token punctuation">.</span>NewId<span class="token punctuation">;</span><span class="token comment">// rcofqodori0w</span>
<span class="token class-name"><span class="token keyword">string</span></span> shortId <span class="token operator">=</span> sf<span class="token punctuation">.</span><span class="token function">GetUniqueShortId</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// qodw9728</span>
<span class="token class-name"><span class="token keyword">string</span></span> id <span class="token operator">=</span> SnowFlakeNew<span class="token punctuation">.</span>NewId<span class="token punctuation">;</span><span class="token comment">// æ”¹è‰¯ç‰ˆé›ªèŠ±idï¼Œå¯¹æ—¶é—´å›æ‹¨ä¸æ•æ„Ÿ</span>

<span class="token comment">// å…¨å±€è®¾ç½®</span>
SnowFlake<span class="token punctuation">.</span><span class="token function">SetMachienId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®æœºå™¨id</span>
SnowFlake<span class="token punctuation">.</span><span class="token function">SetInitialOffset</span><span class="token punctuation">(</span><span class="token number">4219864516915105792</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®èµ·å§‹åç§»é‡</span>
SnowFlake<span class="token punctuation">.</span><span class="token function">SetNumberFormater</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberFormater</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789abcdefghijklmnopqrstuvwxyz._-!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®æ•°åˆ¶æ ¼å¼åŒ–å™¨</span>

SnowFlakeNew<span class="token punctuation">.</span><span class="token function">SetMachienId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®æœºå™¨id</span>
SnowFlakeNew<span class="token punctuation">.</span><span class="token function">SetInitialOffset</span><span class="token punctuation">(</span><span class="token number">4219864516915105792</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®èµ·å§‹åç§»é‡</span>
SnowFlakeNew<span class="token punctuation">.</span><span class="token function">SetNumberFormater</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberFormater</span><span class="token punctuation">(</span><span class="token string">&quot;0123456789abcdefghijklmnopqrstuvwxyz._-!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®æ•°åˆ¶æ ¼å¼åŒ–å™¨</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">double</span></span> time <span class="token operator">=</span> HiPerfTimer<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>SnowFlake<span class="token punctuation">.</span>NewId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span>Count <span class="token operator">==</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//True</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;äº§ç”Ÿ100wä¸ªidè€—æ—¶&quot;</span> <span class="token operator">+</span> time <span class="token operator">+</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2.6891495s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-å†œå†è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#_8-å†œå†è½¬æ¢" aria-hidden="true">#</a> 8.å†œå†è½¬æ¢</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>ChineseCalendar<span class="token punctuation">.</span>CustomHolidays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2018-12-31&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;å…ƒæ—¦èŠ‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è‡ªå®šä¹‰èŠ‚å‡æ—¥</span>
<span class="token class-name">ChineseCalendar</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ChineseCalendar</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2018-12-31&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span>ChineseDateString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// äºŒé›¶ä¸€å…«å¹´åä¸€æœˆå»¿äº”</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span>AnimalString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”Ÿè‚–ï¼šç‹—</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span>GanZhiDateString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¹²æ”¯ï¼šæˆŠæˆŒå¹´ç”²å­æœˆä¸é…‰æ—¥</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>today<span class="token punctuation">.</span>DateHoliday<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æŒ‰å…¬å†è®¡ç®—çš„èŠ‚å‡æ—¥</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-linqè¡¨è¾¾å¼æ ‘æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_9-linqè¡¨è¾¾å¼æ ‘æ‰©å±•" aria-hidden="true">#</a> 9.Linqè¡¨è¾¾å¼æ ‘æ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> where1 <span class="token operator">=</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> where2 <span class="token operator">=</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>Length <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> func <span class="token operator">=</span> where1<span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span>where2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AndIf</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=&gt;</span>s<span class="token operator">==</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Andå’ŒAndIfå¯ä¾›é€‰æ‹©ï¼Œæ»¡è¶³æ¡ä»¶å†æ‰§è¡ŒAnd</span>
<span class="token class-name"><span class="token keyword">bool</span></span> b<span class="token operator">=</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;abcd12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> where1 <span class="token operator">=</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Expression<span class="token punctuation">&lt;</span>Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> where2 <span class="token operator">=</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>Length <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">Func<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> func <span class="token operator">=</span> where1
    <span class="token punctuation">.</span><span class="token function">Or</span><span class="token punctuation">(</span>where2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">OrIf</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token operator">=&gt;</span>s<span class="token operator">==</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Orå’ŒOrIfå¯ä¾›é€‰æ‹©ï¼Œæ»¡è¶³æ¡ä»¶å†æ‰§è¡ŒOr</span>
<span class="token class-name"><span class="token keyword">bool</span></span> b<span class="token operator">=</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>queryable<span class="token punctuation">.</span><span class="token function">WhereIf</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token operator">=&gt;</span>e<span class="token punctuation">.</span>Name<span class="token operator">==</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">WhereIf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> age<span class="token punctuation">.</span>HasValue<span class="token punctuation">,</span>e<span class="token operator">=&gt;</span>e<span class="token punctuation">.</span>Age<span class="token operator">&gt;=</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IQueryableçš„WhereIfæ‰©å±•å‡½æ•°ï¼Œæ»¡è¶³æ¡ä»¶å†æ‰§è¡ŒWhere</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-æ¨¡ç‰ˆå¼•æ“" tabindex="-1"><a class="header-anchor" href="#_10-æ¨¡ç‰ˆå¼•æ“" aria-hidden="true">#</a> 10.æ¨¡ç‰ˆå¼•æ“</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Template</span><span class="token punctuation">(</span><span class="token string">&quot;{{name}}ï¼Œä½ å¥½ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tmp<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸‡é‡‘æ²¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸‡é‡‘æ²¹ï¼Œä½ å¥½ï¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Template</span><span class="token punctuation">(</span><span class="token string">&quot;{{one}},{{two}},{{three}}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;three&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1,2,3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Template</span><span class="token punctuation">(</span><span class="token string">&quot;{{name}}ï¼Œ{{greet}}ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tmp<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸‡é‡‘æ²¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// throw æ¨¡ç‰ˆå˜é‡{{greet}}æœªè¢«ä½¿ç”¨</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-listè½¬datatable" tabindex="-1"><a class="header-anchor" href="#_11-listè½¬datatable" aria-hidden="true">#</a> 11.Listè½¬Datatable</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span>
        Age <span class="token operator">=</span> <span class="token number">22</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> <span class="token string">&quot;æå››&quot;</span><span class="token punctuation">,</span>
        Age <span class="token operator">=</span> <span class="token number">21</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> <span class="token string">&quot;ç‹äº”&quot;</span><span class="token punctuation">,</span>
        Age <span class="token operator">=</span> <span class="token number">28</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> table <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span><span class="token punctuation">{</span>å§“å<span class="token operator">=</span>c<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>å¹´é¾„<span class="token operator">=</span>c<span class="token punctuation">.</span>Age<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToDataTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°†è‡ªåŠ¨å¡«å……åˆ—å§“åå’Œå¹´é¾„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-æ–‡ä»¶å‹ç¼©è§£å‹" tabindex="-1"><a class="header-anchor" href="#_12-æ–‡ä»¶å‹ç¼©è§£å‹" aria-hidden="true">#</a> 12.æ–‡ä»¶å‹ç¼©è§£å‹</h3><p>.NET Framework</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">MemoryStream</span> ms <span class="token operator">=</span> SevenZipCompressor<span class="token punctuation">.</span><span class="token function">ZipStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">@&quot;D:\\1.txt&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://ww3.sinaimg.cn/large/87c01ec7gy1fsq6rywto2j20je0d3td0.jpg&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‹ç¼©æˆå†…å­˜æµ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>SevenZipCompressor<span class="token punctuation">.</span><span class="token function">Zip</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">@&quot;D:\\1.txt&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://ww3.sinaimg.cn/large/87c01ec7gy1fsq6rywto2j20je0d3td0.jpg&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> zip<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‹ç¼©æˆzip</span>
SevenZipCompressor<span class="token punctuation">.</span><span class="token function">UnRar</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\Download\\test.rar&quot;</span><span class="token punctuation">,</span> <span class="token string">@&quot;D:\\Download\\&quot;);//è§£å‹rar
SevenZipCompressor.Decompress(@&quot;</span>D<span class="token punctuation">:</span>\\Download\\test<span class="token punctuation">.</span>tar<span class="token string">&quot;, @&quot;</span>D<span class="token punctuation">:</span>\\Download\\&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è‡ªåŠ¨è¯†åˆ«è§£å‹å‹ç¼©åŒ…</span>
SevenZipCompressor<span class="token punctuation">.</span><span class="token function">Decompress</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\Download\\test.7z&quot;</span><span class="token punctuation">,</span> @&quot;D<span class="token punctuation">:</span>\\Download\\&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ASP.NET Core</p><p>Startup.cs</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddSevenZipCompressor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ„é€ å‡½æ•°æ³¨å…¥ISevenZipCompressor</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ISevenZipCompressor</span> _sevenZipCompressor<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token class-name">ISevenZipCompressor</span> sevenZipCompressor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    _sevenZipCompressor <span class="token operator">=</span> sevenZipCompressor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨æ–¹å¼åŒ.NET Frameworkç‰ˆæœ¬</p><h3 id="_13-ç®€æ˜“æ—¥å¿—ç»„ä»¶-åˆä¸æ˜¯ä¸èƒ½ç”¨-jpg" tabindex="-1"><a class="header-anchor" href="#_13-ç®€æ˜“æ—¥å¿—ç»„ä»¶-åˆä¸æ˜¯ä¸èƒ½ç”¨-jpg" aria-hidden="true">#</a> 13.ç®€æ˜“æ—¥å¿—ç»„ä»¶(åˆä¸æ˜¯ä¸èƒ½ç”¨.jpg)</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>LogManager<span class="token punctuation">.</span>LogDirectory<span class="token operator">=</span>AppDomain<span class="token punctuation">.</span>CurrentDomain<span class="token punctuation">.</span>BaseDirectory<span class="token operator">+</span><span class="token string">&quot;/logs&quot;</span><span class="token punctuation">;</span>
LogManager<span class="token punctuation">.</span>Event<span class="token operator">+=</span>info <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token comment">//todo:æ³¨å†Œä¸€äº›äº‹ä»¶æ“ä½œ</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
LogManager<span class="token punctuation">.</span><span class="token function">Info</span><span class="token punctuation">(</span><span class="token string">&quot;è®°å½•ä¸€æ¬¡æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LogManager<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-å¤šçº¿ç¨‹åå°ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_14-å¤šçº¿ç¨‹åå°ä¸‹è½½" aria-hidden="true">#</a> 14.å¤šçº¿ç¨‹åå°ä¸‹è½½</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> mtd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MultiThreadDownloader</span><span class="token punctuation">(</span><span class="token string">&quot;https://attachments-cdn.shimo.im/yXwC4kphjVQu06rH/KeyShot_Pro_7.3.37.7z&quot;</span><span class="token punctuation">,</span>Environment<span class="token punctuation">.</span><span class="token function">GetEnvironmentVariable</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;E:\\\\Downloads\\\\KeyShot_Pro_7.3.37.7z&quot;</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mtd<span class="token punctuation">.</span><span class="token function">Configure</span><span class="token punctuation">(</span>req <span class="token operator">=&gt;</span>
 <span class="token punctuation">{</span>
     req<span class="token punctuation">.</span>Referer <span class="token operator">=</span> <span class="token string">&quot;https://masuit.com&quot;</span><span class="token punctuation">;</span>
     req<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://baidu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mtd<span class="token punctuation">.</span>TotalProgressChanged<span class="token operator">+=</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> downloader <span class="token operator">=</span> sender <span class="token keyword">as</span> <span class="token class-name">MultiThreadDownloader</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹è½½è¿›åº¦ï¼š&quot;</span><span class="token operator">+</span>downloader<span class="token punctuation">.</span>TotalProgress<span class="token operator">+</span><span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹è½½é€Ÿåº¦ï¼š&quot;</span><span class="token operator">+</span>downloader<span class="token punctuation">.</span>TotalSpeedInBytes<span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token operator">+</span><span class="token string">&quot;MBps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
mtd<span class="token punctuation">.</span>FileMergeProgressChanged<span class="token operator">+=</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹è½½å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
mtd<span class="token punctuation">.</span>FileMergedComplete<span class="token operator">+=</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶åˆå¹¶å®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
mtd<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¼€å§‹ä¸‹è½½</span>
<span class="token comment">//mtd.Pause(); // æš‚åœä¸‹è½½</span>
<span class="token comment">//mtd.Resume(); // ç»§ç»­ä¸‹è½½</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-åŠ å¯†è§£å¯†-hash" tabindex="-1"><a class="header-anchor" href="#_15-åŠ å¯†è§£å¯†-hash" aria-hidden="true">#</a> 15.åŠ å¯†è§£å¯†/hash</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5åŠ ç›</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5ä¸¤æ¬¡</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString2</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5ä¸¤æ¬¡åŠ ç›</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5ä¸‰æ¬¡</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">MDString3</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// MD5ä¸‰æ¬¡åŠ ç›</span>

<span class="token class-name"><span class="token keyword">string</span></span> aes <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">AESEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// AESåŠ å¯†ä¸ºå¯†æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> aes<span class="token punctuation">.</span><span class="token function">AESDecrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//AESè§£å¯†ä¸ºæ˜æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> aes <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">AESEncrypt</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// AESå¯†é’¥åŠ å¯†ä¸ºå¯†æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> aes<span class="token punctuation">.</span><span class="token function">AESDecrypt</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//AESå¯†é’¥è§£å¯†ä¸ºæ˜æ–‡</span>

<span class="token class-name"><span class="token keyword">string</span></span> enc <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">DesEncrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// DESåŠ å¯†ä¸ºå¯†æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> enc<span class="token punctuation">.</span><span class="token function">DesDecrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//DESè§£å¯†ä¸ºæ˜æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> enc <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">DesEncrypt</span><span class="token punctuation">(</span><span class="token string">&quot;abcdefgh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// DESå¯†é’¥åŠ å¯†ä¸ºå¯†æ–‡</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> enc<span class="token punctuation">.</span><span class="token function">DesDecrypt</span><span class="token punctuation">(</span><span class="token string">&quot;abcdefgh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//DESå¯†é’¥è§£å¯†ä¸ºæ˜æ–‡</span>

<span class="token class-name">RsaKey</span> rsaKey <span class="token operator">=</span> RsaCrypt<span class="token punctuation">.</span><span class="token function">GenerateRsaKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”ŸæˆRSAå¯†é’¥å¯¹</span>
<span class="token class-name"><span class="token keyword">string</span></span> encrypt <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">RSAEncrypt</span><span class="token punctuation">(</span>rsaKey<span class="token punctuation">.</span>PublicKey<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å…¬é’¥åŠ å¯†</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> encrypt<span class="token punctuation">.</span><span class="token function">RSADecrypt</span><span class="token punctuation">(</span>rsaKey<span class="token punctuation">.</span>PrivateKey<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç§é’¥è§£å¯†</span>

<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">Crc32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”Ÿæˆcrc32æ‘˜è¦</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">Crc64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”Ÿæˆcrc64æ‘˜è¦</span>
<span class="token class-name"><span class="token keyword">string</span></span> s <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">SHA256</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç”ŸæˆSHA256æ‘˜è¦</span>

<span class="token comment">// é›¶å®½å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨ä½œæ–‡ç« æ°´å°ï¼Œä»¥ä¸€ç§çœ‹ä¸è§çš„å­—ç¬¦æ’å…¥åˆ°æ–‡æœ¬ä¸­ï¼Œä½¿æ”»å‡»è€…æ— æ³•ç›´æ¥è¯†åˆ«æ–‡æœ¬å†…å®¹ï¼Œä»è€Œèµ·åˆ°ä¿æŠ¤æ–‡ç« çš„ä½œç”¨ã€‚</span>
<span class="token class-name"><span class="token keyword">string</span></span> pub<span class="token operator">=</span><span class="token string">&quot;hello,world!&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> hidden<span class="token operator">=</span><span class="token string">&quot;ldqk&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> str <span class="token operator">=</span> pub<span class="token punctuation">.</span><span class="token function">InjectZeroWidthString</span><span class="token punctuation">(</span>hidden<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰©å±•å‡½æ•°è°ƒç”¨ï¼šå°†&quot;ldqk&quot;ä»¥é›¶å®½å­—ç¬¦ä¸²çš„æ–¹å¼éšè—åœ¨&quot;hello,world!&quot;ä¸­</span>
<span class="token class-name"><span class="token keyword">var</span></span> str <span class="token operator">=</span> ZeroWidthCodec<span class="token punctuation">.</span><span class="token function">Encrypt</span><span class="token punctuation">(</span>pub<span class="token punctuation">,</span>hidden<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»è°ƒç”¨ï¼šå°†&quot;ldqk&quot;ä»¥é›¶å®½å­—ç¬¦ä¸²çš„æ–¹å¼éšè—åœ¨&quot;hello,world!&quot;ä¸­</span>
<span class="token class-name"><span class="token keyword">var</span></span> dec <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">DecodeZeroWidthString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰©å±•å‡½æ•°è°ƒç”¨ï¼šå°†åŒ…å«é›¶å®½å­—ç¬¦ä¸²çš„å¯†æ–‡è§£å¯†å‡ºéšè—å­—ç¬¦ä¸²&quot;ldqk&quot;</span>
<span class="token class-name"><span class="token keyword">var</span></span> dec <span class="token operator">=</span> ZeroWidthCodec<span class="token punctuation">.</span><span class="token function">Decrypt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»è°ƒç”¨ï¼šå°†åŒ…å«é›¶å®½å­—ç¬¦ä¸²çš„å¯†æ–‡è§£å¯†å‡ºéšè—å­—ç¬¦ä¸²&quot;ldqk&quot;</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc <span class="token operator">=</span> hidden<span class="token punctuation">.</span><span class="token function">EncodeToZeroWidthText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰©å±•å‡½æ•°è°ƒç”¨ï¼šå°†å­—ç¬¦ä¸²ç¼–ç æˆé›¶å®½å­—ç¬¦ä¸²</span>
<span class="token class-name"><span class="token keyword">var</span></span> enc <span class="token operator">=</span> ZeroWidthCodec<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç±»è°ƒç”¨ï¼šå°†å­—ç¬¦ä¸²ç¼–ç æˆé›¶å®½å­—ç¬¦ä¸²</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16-å®ä½“æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#_16-å®ä½“æ ¡éªŒ" aria-hidden="true">#</a> 16.å®ä½“æ ¡éªŒ</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IsEmail</span></span><span class="token punctuation">]</span> <span class="token comment">//å¯åœ¨appsetting.jsonä¸­æ·»åŠ EmailDomainWhiteListé…ç½®é‚®ç®±åŸŸåç™½åå•ï¼Œé€—å·åˆ†éš”</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IsPhone</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> PhoneNumber <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IsLandline</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Landline <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IsIPAddress</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> IP <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MinValue</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;å¹´é¾„æœ€å°ä¸º0å²&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">MaxValue</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;å¹´é¾„æœ€å¤§100å²&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ComplexPassword</span></span><span class="token punctuation">]</span><span class="token comment">//å¯†ç å¤æ‚åº¦æ ¡éªŒ</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Password <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumOf</span></span><span class="token punctuation">]</span> <span class="token comment">// æ£€æµ‹æ˜¯å¦æ˜¯æœ‰æ•ˆæšä¸¾å€¼</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">MyEnum</span> MyEnum <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MinItemsCount</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// æ£€æµ‹é›†åˆå…ƒç´ æœ€å°‘1ä¸ª</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Strs <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17-htmlæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_17-htmlæ“ä½œ" aria-hidden="true">#</a> 17.HTMLæ“ä½œ</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> srcs <span class="token operator">=</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">.</span><span class="token function">MatchImgSrcs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–htmlå­—ç¬¦ä¸²é‡Œæ‰€æœ‰çš„imgæ ‡ç­¾çš„srcå±æ€§</span>
<span class="token class-name"><span class="token keyword">var</span></span> imgTags <span class="token operator">=</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">.</span><span class="token function">MatchImgTags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–htmlå­—ç¬¦ä¸²é‡Œçš„æ‰€æœ‰çš„imgæ ‡ç­¾</span>
<span class="token class-name"><span class="token keyword">var</span></span> str<span class="token operator">=</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">.</span><span class="token function">RemoveHtmlTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å»é™¤htmlæ ‡ç­¾</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18-ipåœ°å€å’Œurl" tabindex="-1"><a class="header-anchor" href="#_18-ipåœ°å€å’Œurl" aria-hidden="true">#</a> 18.IPåœ°å€å’ŒURL</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">bool</span></span> inRange <span class="token operator">=</span> <span class="token string">&quot;192.168.2.2&quot;</span><span class="token punctuation">.</span><span class="token function">IpAddressInRange</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.1.1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;192.168.3.255&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ¤æ–­IPåœ°å€æ˜¯å¦åœ¨è¿™ä¸ªåœ°å€æ®µé‡Œ</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isPrivateIp <span class="token operator">=</span> <span class="token string">&quot;172.16.23.25&quot;</span><span class="token punctuation">.</span><span class="token function">IsPrivateIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç§æœ‰åœ°å€</span>
<span class="token class-name"><span class="token keyword">bool</span></span> isExternalAddress <span class="token operator">=</span> <span class="token string">&quot;http://baidu.com&quot;</span><span class="token punctuation">.</span><span class="token function">IsExternalAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¤–ç½‘çš„URL</span>

<span class="token comment">//ä»¥ä¸‹éœ€è¦é…ç½®baiduAK</span>
<span class="token class-name"><span class="token keyword">string</span></span> isp <span class="token operator">=</span> <span class="token string">&quot;114.114.114.114&quot;</span><span class="token punctuation">.</span><span class="token function">GetISP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–ISPè¿è¥å•†ä¿¡æ¯</span>
<span class="token class-name">PhysicsAddress</span> physicsAddress <span class="token operator">=</span> <span class="token string">&quot;114.114.114.114&quot;</span><span class="token punctuation">.</span><span class="token function">GetPhysicsAddressInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">;</span><span class="token comment">// è·å–è¯¦ç»†åœ°ç†ä¿¡æ¯å¯¹è±¡</span>
<span class="token class-name">Tuple<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> ipAddressInfo <span class="token operator">=</span> <span class="token string">&quot;114.114.114.114&quot;</span><span class="token punctuation">.</span><span class="token function">GetIPAddressInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">;</span><span class="token comment">// è·å–è¯¦ç»†åœ°ç†ä¿¡æ¯é›†åˆ</span>

<span class="token class-name"><span class="token keyword">uint</span></span> number<span class="token operator">=</span>ipAddress<span class="token punctuation">.</span><span class="token function">ToUInt32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IPåœ°å€è½¬10è¿›åˆ¶</span>
<span class="token class-name"><span class="token keyword">uint</span></span> number<span class="token operator">=</span><span class="token string">&quot;114.114.114.114&quot;</span><span class="token punctuation">.</span><span class="token function">IPToID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IPåœ°å€è½¬10è¿›åˆ¶</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_19-å¯¹è±¡å±æ€§å€¼åˆå¹¶" tabindex="-1"><a class="header-anchor" href="#_19-å¯¹è±¡å±æ€§å€¼åˆå¹¶" aria-hidden="true">#</a> 19.å¯¹è±¡å±æ€§å€¼åˆå¹¶</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> A <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span><span class="token punctuation">?</span></span> B <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> C <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    A <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    B <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    C <span class="token operator">=</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> merge <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">Merge</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆå¹¶åå¯¹è±¡ï¼šA = &quot;aa&quot;ï¼ŒB = trueï¼ŒC = 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_20-å…ƒç´ å»é‡" tabindex="-1"><a class="header-anchor" href="#_20-å…ƒç´ å»é‡" aria-hidden="true">#</a> 20.å…ƒç´ å»é‡</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;1@1.cn&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;1@1.cn&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;1@1.cn&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span> classes <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">DistinctBy</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Email<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>classes<span class="token punctuation">.</span>Count<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_21-æšä¸¾æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_21-æšä¸¾æ‰©å±•" aria-hidden="true">#</a> 21.æšä¸¾æ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">MyEnum</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;è¯»&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Description</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;è¯»&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumDescription</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ“ä½œ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;è¯»&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// å¤šè¯­è¨€æšä¸¾æè¿°</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumDescription</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Read&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Read&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Read<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
  
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;å†™&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Description</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;å†™&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Write<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>

    Delete<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>

    All<span class="token operator">=</span><span class="token number">8</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> dic1 <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyEnum</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æšä¸¾å€¼å’Œå­—ç¬¦ä¸²è¡¨ç¤ºçš„å­—å…¸æ˜ å°„</span>
<span class="token class-name"><span class="token keyword">var</span></span> dic2 <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyEnum</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetDescriptionAndValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å­—ç¬¦ä¸²è¡¨ç¤ºå’Œæšä¸¾å€¼çš„å­—å…¸æ˜ å°„</span>
<span class="token class-name"><span class="token keyword">string</span></span> desc <span class="token operator">=</span> MyEnum<span class="token punctuation">.</span>Read<span class="token punctuation">.</span><span class="token function">GetDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–Descriptionæ ‡ç­¾</span>
<span class="token class-name"><span class="token keyword">string</span></span> display <span class="token operator">=</span> MyEnum<span class="token punctuation">.</span>Read<span class="token punctuation">.</span><span class="token function">GetDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–Displayæ ‡ç­¾çš„Nameå±æ€§</span>
<span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyEnum</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token string">&quot;Read&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å­—ç¬¦ä¸²è¡¨ç¤ºå€¼å¯¹åº”çš„æšä¸¾å€¼</span>
<span class="token class-name"><span class="token keyword">string</span></span> enumString <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token function">ToEnumString</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyEnum</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æšä¸¾å€¼å¯¹åº”çš„å­—ç¬¦ä¸²è¡¨ç¤º</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> op<span class="token operator">=</span>MyEnum<span class="token punctuation">.</span>Read<span class="token operator">|</span>MyEnum<span class="token punctuation">.</span>Write<span class="token operator">|</span>MyEnum<span class="token punctuation">.</span>Delete<span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> enums<span class="token operator">=</span>op<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹†åˆ†æšä¸¾å€¼ï¼Œå¾—åˆ°æšä¸¾æ•°ç»„ï¼Œè¿™ä¸ªå‡½æ•°å»ºè®®ä½¿ç”¨åœ¨æŒ‰ä½å®šå€¼çš„æšä¸¾</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-å®šé•¿é˜Ÿåˆ—å’Œconcurrenthashsetå®ç°" tabindex="-1"><a class="header-anchor" href="#_22-å®šé•¿é˜Ÿåˆ—å’Œconcurrenthashsetå®ç°" aria-hidden="true">#</a> 22.å®šé•¿é˜Ÿåˆ—å’ŒConcurrentHashSetå®ç°</h3><p><code>å¦‚æœæ˜¯.NET5åŠä»¥ä¸Šï¼Œæ¨èä½¿ç”¨æ¡†æ¶è‡ªå¸¦çš„Channelå®ç°è¯¥åŠŸèƒ½</code></p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">LimitedQueue<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LimitedQueue<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å£°æ˜ä¸€ä¸ªå®¹é‡ä¸º32ä¸ªå…ƒç´ çš„å®šé•¿é˜Ÿåˆ—</span>
<span class="token class-name">ConcurrentLimitedQueue<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConcurrentLimitedQueue<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å£°æ˜ä¸€ä¸ªå®¹é‡ä¸º32ä¸ªå…ƒç´ çš„çº¿ç¨‹å®‰å…¨çš„å®šé•¿é˜Ÿåˆ—</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConcurrentHashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨æ³•å’Œhashsetä¿æŒä¸€è‡´</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_23-åå°„æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_23-åå°„æ“ä½œ" aria-hidden="true">#</a> 23.åå°„æ“ä½œ</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">MyClass</span> myClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PropertyInfo<span class="token punctuation">[</span><span class="token punctuation">]</span></span> properties <span class="token operator">=</span> myClass<span class="token punctuation">.</span><span class="token function">GetProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å±æ€§åˆ—è¡¨</span>
myClass<span class="token punctuation">.</span><span class="token function">SetProperty</span><span class="token punctuation">(</span><span class="token string">&quot;Email&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1@1.cn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»™å¯¹è±¡è®¾ç½®å€¼</span>
myClass<span class="token punctuation">.</span><span class="token function">DeepClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡æ·±æ‹·è´ï¼Œå¸¦åµŒå¥—å±‚çº§çš„</span>
myClass<span class="token punctuation">.</span><span class="token function">ToDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡è½¬å­—å…¸</span>
myClass<span class="token punctuation">.</span><span class="token function">ToDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹è±¡è½¬æ¢æˆåŠ¨æ€å¯æ‰©å±•ç±»å‹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_24-é‚®ä»¶å‘é€" tabindex="-1"><a class="header-anchor" href="#_24-é‚®ä»¶å‘é€" aria-hidden="true">#</a> 24.é‚®ä»¶å‘é€</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Email</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    SmtpServer <span class="token operator">=</span> <span class="token string">&quot;smtp.masuit.com&quot;</span><span class="token punctuation">,</span><span class="token comment">// SMTPæœåŠ¡å™¨</span>
    SmtpPort <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token comment">// SMTPæœåŠ¡å™¨ç«¯å£</span>
    EnableSsl <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//ä½¿ç”¨SSL</span>
    Username <span class="token operator">=</span> <span class="token string">&quot;admin@masuit.com&quot;</span><span class="token punctuation">,</span><span class="token comment">// é‚®ç®±ç”¨æˆ·å</span>
    Password <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span><span class="token comment">// é‚®ç®±å¯†ç </span>
    Tos <span class="token operator">=</span> <span class="token string">&quot;10000@qq.com,10001@qq.com&quot;</span><span class="token punctuation">,</span> <span class="token comment">//æ”¶ä»¶äºº</span>
    Subject <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•é‚®ä»¶&quot;</span><span class="token punctuation">,</span><span class="token comment">//é‚®ä»¶æ ‡é¢˜</span>
    Body <span class="token operator">=</span> <span class="token string">&quot;ä½ å¥½å•Š&quot;</span><span class="token punctuation">,</span><span class="token comment">//é‚®ä»¶å†…å®¹</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å‘é€æˆåŠŸåçš„å›è°ƒ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¼‚æ­¥å‘é€é‚®ä»¶</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_25-å›¾åƒçš„ç®€å•å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_25-å›¾åƒçš„ç®€å•å¤„ç†" aria-hidden="true">#</a> 25.å›¾åƒçš„ç®€å•å¤„ç†</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token string">&quot;base64&quot;</span><span class="token punctuation">.</span><span class="token function">SaveDataUriAsImageFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°†Base64ç¼–ç è½¬æ¢æˆå›¾ç‰‡</span>

<span class="token class-name">Image</span> image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token function">FromFile</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span><span class="token function">MakeThumbnail</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\2.jpg&quot;</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> ThumbnailCutMode<span class="token punctuation">.</span>LockWidth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”Ÿæˆç¼©ç•¥å›¾</span>

<span class="token class-name">Bitmap</span> bmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Bitmap</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Bitmap</span> newBmp <span class="token operator">=</span> bmp<span class="token punctuation">.</span><span class="token function">BWPic</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> bmp<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è½¬æ¢æˆé»‘ç™½</span>
<span class="token class-name">Bitmap</span> newBmp <span class="token operator">=</span> bmp<span class="token punctuation">.</span><span class="token function">CutAndResize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rectangle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1600</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è£å‰ªå¹¶ç¼©æ”¾</span>
bmp<span class="token punctuation">.</span><span class="token function">RevPicLR</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> bmp<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å·¦å³é•œåƒ</span>
bmp<span class="token punctuation">.</span><span class="token function">RevPicUD</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> bmp<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸Šä¸‹é•œåƒ</span>

<span class="token class-name"><span class="token keyword">var</span></span> marker<span class="token operator">=</span><span class="token function">ImageWatermarker</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token operator">=</span>maker<span class="token punctuation">.</span><span class="token function">AddWatermark</span><span class="token punctuation">(</span><span class="token string">&quot;æ°´å°æ–‡å­—&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å­—ä½“æ–‡ä»¶&quot;</span><span class="token punctuation">,</span>å­—ä½“å¤§å°<span class="token punctuation">,</span>color<span class="token punctuation">,</span>æ°´å°ä½ç½®<span class="token punctuation">,</span>è¾¹è·<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»™å›¾ç‰‡æ·»åŠ æ°´å°</span>
stream<span class="token operator">=</span>maker<span class="token punctuation">.</span><span class="token function">AddWatermark</span><span class="token punctuation">(</span>æ°´å°å›¾ç‰‡<span class="token punctuation">,</span>æ°´å°ä½ç½®<span class="token punctuation">,</span>è¾¹è·<span class="token punctuation">,</span>å­—ä½“å¤§å°<span class="token punctuation">,</span>å­—ä½“<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»™å›¾ç‰‡æ·»åŠ æ°´å°</span>

<span class="token comment">// å›¾åƒç›¸ä¼¼åº¦å¯¹æ¯”</span>
<span class="token class-name"><span class="token keyword">var</span></span> hasher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ImageHasher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> hash1 <span class="token operator">=</span> hasher<span class="token punctuation">.</span><span class="token function">DifferenceHash256</span><span class="token punctuation">(</span><span class="token string">&quot;å›¾ç‰‡1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨å·®åˆ†å“ˆå¸Œç®—æ³•è®¡ç®—å›¾åƒçš„256ä½å“ˆå¸Œ</span>
<span class="token class-name"><span class="token keyword">var</span></span> hash2 <span class="token operator">=</span> hasher<span class="token punctuation">.</span><span class="token function">DifferenceHash256</span><span class="token punctuation">(</span><span class="token string">&quot;å›¾ç‰‡2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨å·®åˆ†å“ˆå¸Œç®—æ³•è®¡ç®—å›¾åƒçš„256ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash1 = hasher.AverageHash64(&quot;å›¾ç‰‡1&quot;); // ä½¿ç”¨å¹³å‡å€¼ç®—æ³•è®¡ç®—å›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash2 = hasher.AverageHash64(&quot;å›¾ç‰‡2&quot;); // ä½¿ç”¨å¹³å‡å€¼ç®—æ³•è®¡ç®—å›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash1 = hasher.DctHash(&quot;å›¾ç‰‡1&quot;); // ä½¿ç”¨DCTç®—æ³•è®¡ç®—å›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash2 = hasher.DctHash(&quot;å›¾ç‰‡2&quot;); // ä½¿ç”¨DCTç®—æ³•è®¡ç®—å›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash1 = hasher.MedianHash64(&quot;å›¾ç‰‡1&quot;); // ä½¿ç”¨ä¸­å€¼ç®—æ³•è®¡ç®—ç»™å®šå›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token comment">//var hash2 = hasher.MedianHash64(&quot;å›¾ç‰‡2&quot;); // ä½¿ç”¨ä¸­å€¼ç®—æ³•è®¡ç®—ç»™å®šå›¾åƒçš„64ä½å“ˆå¸Œ</span>
<span class="token class-name"><span class="token keyword">var</span></span> sim<span class="token operator">=</span>ImageHasher<span class="token punctuation">.</span><span class="token function">Compare</span><span class="token punctuation">(</span>hash1<span class="token punctuation">,</span>hash2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å›¾ç‰‡çš„ç›¸ä¼¼åº¦ï¼ŒèŒƒå›´ï¼š[0,1]</span>

<span class="token class-name"><span class="token keyword">var</span></span> imageFormat<span class="token operator">=</span>stream<span class="token punctuation">.</span><span class="token function">GetImageType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–å›¾ç‰‡çš„çœŸå®æ ¼å¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_26-éšæœºæ•°" tabindex="-1"><a class="header-anchor" href="#_26-éšæœºæ•°" aria-hidden="true">#</a> 26.éšæœºæ•°</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">Random</span> rnd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">int</span></span> num <span class="token operator">=</span> rnd<span class="token punctuation">.</span><span class="token function">StrictNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äº§ç”ŸçœŸéšæœºæ•°</span>
<span class="token class-name"><span class="token keyword">double</span></span> gauss <span class="token operator">=</span> rnd<span class="token punctuation">.</span><span class="token function">NextGauss</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//äº§ç”Ÿæ­£æ€é«˜æ–¯åˆ†å¸ƒçš„éšæœºæ•°</span>
<span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NumberFormater</span><span class="token punctuation">(</span><span class="token number">62</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span>MaxValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_27-æƒé‡éšæœºç­›é€‰åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_27-æƒé‡éšæœºç­›é€‰åŠŸèƒ½" aria-hidden="true">#</a> 27.æƒé‡éšæœºç­›é€‰åŠŸèƒ½</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> data<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;D&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>data<span class="token punctuation">.</span><span class="token function">WeightedItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŒ‰æƒé‡é€‰å‡º1ä¸ªå…ƒç´ </span>
<span class="token class-name"><span class="token keyword">var</span></span> list<span class="token operator">=</span>data<span class="token punctuation">.</span><span class="token function">WeightedItems</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŒ‰æƒé‡é€‰å‡º2ä¸ªå…ƒç´ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> selector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedSelector<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeightedItem<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;D&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> item <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŒ‰æƒé‡é€‰å‡º1ä¸ªå…ƒç´ </span>
<span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">SelectMultiple</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŒ‰æƒé‡é€‰å‡º3ä¸ªå…ƒç´ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>list<span class="token punctuation">.</span><span class="token function">WeightedItems</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>e<span class="token operator">=&gt;</span>e<span class="token punctuation">.</span>Price<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰ä»·æ ¼æƒé‡é€‰å‡º3ä¸ªå…ƒç´ </span>
list<span class="token punctuation">.</span><span class="token function">WeightedBy</span><span class="token punctuation">(</span>e<span class="token operator">=&gt;</span>e<span class="token punctuation">.</span>Price<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰ä»·æ ¼æƒé‡é€‰å‡º1ä¸ªå…ƒç´ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_28-ef-coreæ”¯æŒaddorupdateæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_28-ef-coreæ”¯æŒaddorupdateæ–¹æ³•" aria-hidden="true">#</a> 28.EF Coreæ”¯æŒAddOrUpdateæ–¹æ³•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// æŒ‰Idæ·»åŠ æˆ–æ›´æ–°æ–‡ç« å®ä½“</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Post</span> <span class="token function">SavePost</span><span class="token punctuation">(</span><span class="token class-name">Post</span> t<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    DataContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Set</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Post<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddOrUpdate</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_29-æ•æ„Ÿä¿¡æ¯æ©ç " tabindex="-1"><a class="header-anchor" href="#_29-æ•æ„Ÿä¿¡æ¯æ©ç " aria-hidden="true">#</a> 29.æ•æ„Ÿä¿¡æ¯æ©ç </h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token string">&quot;13123456789&quot;</span><span class="token punctuation">.</span><span class="token function">Mask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 131****5678</span>
<span class="token string">&quot;admin@masuit.com&quot;</span><span class="token punctuation">.</span><span class="token function">MaskEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a****n@masuit.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// Attributeçš„æ–¹å¼ä¸ºjsonåºåˆ—åŒ–æ—¶è¿›è¡Œæ•°æ®è„±æ•</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">JsonConverter</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MaskEmailConverter</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// è¯·æ³¨æ„å‘½åç©ºé—´ï¼Œä½¿ç”¨Newtonsoft.Jsonè¯·å¯¼å…¥Masuit.Tools.Systemså‘½åç©ºé—´ï¼Œä½¿ç”¨System.Text.Jsonè¯·å¯¼å…¥Masuit.Tools.Systems.Text.Jsonå‘½åç©ºé—´</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">JsonConverter</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MaskConverter</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// è¯·æ³¨æ„å‘½åç©ºé—´ï¼Œä½¿ç”¨Newtonsoft.Jsonè¯·å¯¼å…¥Masuit.Tools.Systemså‘½åç©ºé—´ï¼Œä½¿ç”¨System.Text.Jsonè¯·å¯¼å…¥Masuit.Tools.Systems.Text.Jsonå‘½åç©ºé—´</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> PhoneNumber <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_30-é›†åˆæ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_30-é›†åˆæ‰©å±•" aria-hidden="true">#</a> 30.é›†åˆæ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">AddRangeIf</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>Length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è¢«æ·»åŠ å…ƒç´ ä¸­çš„é•¿åº¦å¤§äº1çš„å…ƒç´ æ·»åŠ åˆ°list</span>
list<span class="token punctuation">.</span><span class="token function">AddRangeIfNotContains</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†è¢«æ·»åŠ å…ƒç´ ä¸­ä¸åŒ…å«çš„å…ƒç´ æ·»åŠ åˆ°list</span>
list<span class="token punctuation">.</span><span class="token function">RemoveWhere</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span>Length<span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†é›†åˆä¸­é•¿åº¦å°äº1çš„å…ƒç´ ç§»é™¤</span>
list<span class="token punctuation">.</span><span class="token function">InsertAfter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹åæ’å…¥</span>
list<span class="token punctuation">.</span><span class="token function">InsertAfter</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s <span class="token operator">==</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨å…ƒç´ &quot;1&quot;åæ’å…¥</span>
<span class="token class-name"><span class="token keyword">var</span></span> dic <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">ToDictionarySafety</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®‰å…¨çš„è½¬æ¢æˆå­—å…¸ç±»å‹ï¼Œå½“é”®é‡å¤æ—¶åªæ·»åŠ ä¸€ä¸ªé”®</span>
<span class="token class-name"><span class="token keyword">var</span></span> dic <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">ToConcurrentDictionary</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è½¬æ¢æˆå¹¶å‘å­—å…¸ç±»å‹ï¼Œå½“é”®é‡å¤æ—¶åªæ·»åŠ ä¸€ä¸ªé”®</span>
<span class="token class-name"><span class="token keyword">var</span></span> dic <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">ToDictionarySafety</span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span> s<span class="token punctuation">,</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®‰å…¨çš„è½¬æ¢æˆå­—å…¸ç±»å‹ï¼Œå½“é”®é‡å¤æ—¶åªæ·»åŠ ä¸€ä¸ªé”®</span>
dic<span class="token punctuation">.</span><span class="token function">AddOrUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ·»åŠ æˆ–æ›´æ–°é”®å€¼å¯¹</span>
dic<span class="token punctuation">.</span><span class="token function">AddOrUpdate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;55&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">555</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¹é‡æ·»åŠ æˆ–æ›´æ–°é”®å€¼å¯¹</span>
dic<span class="token punctuation">.</span><span class="token function">AddOrUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>s<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœæ˜¯æ·»åŠ ï¼Œåˆ™å€¼ä¸º6ï¼Œè‹¥æ›´æ–°åˆ™å€¼ä¸º66</span>
dic<span class="token punctuation">.</span><span class="token function">AddOrUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœæ˜¯æ·»åŠ ï¼Œåˆ™å€¼ä¸º6ï¼Œè‹¥æ›´æ–°åˆ™å€¼ä¸º666</span>
dic<span class="token punctuation">.</span><span class="token function">GetOrAdd</span><span class="token punctuation">(</span><span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å­—å…¸è·å–æˆ–æ·»åŠ å…ƒç´ </span>
dic<span class="token punctuation">.</span><span class="token function">GetOrAdd</span><span class="token punctuation">(</span><span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å­—å…¸è·å–æˆ–æ·»åŠ å…ƒç´ </span>
dic<span class="token punctuation">.</span><span class="token function">AsConcurrentDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ™®é€šå­—å…¸è½¬æ¢æˆå¹¶å‘å­—å…¸é›†åˆ</span>
<span class="token class-name"><span class="token keyword">var</span></span> table<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">ToDataTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è½¬æ¢æˆDataTableç±»å‹</span>
table<span class="token punctuation">.</span><span class="token function">AddIdentityColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ç»™DataTableå¢åŠ ä¸€ä¸ªè‡ªå¢åˆ—</span>
table<span class="token punctuation">.</span><span class="token function">HasRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ£€æŸ¥DataTable æ˜¯å¦æœ‰æ•°æ®è¡Œ</span>
table<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ToList</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// datatableè½¬List</span>
<span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">set</span> <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">ToHashSet</span><span class="token punctuation">(</span>s<span class="token operator">=&gt;</span>s<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è½¬HashSet</span>
<span class="token class-name"><span class="token keyword">var</span></span> cts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CancellationTokenSource</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å–æ¶ˆå£ä»¤</span>
<span class="token keyword">await</span> list<span class="token punctuation">.</span><span class="token function">ForeachAsync</span><span class="token punctuation">(</span><span class="token keyword">async</span> i<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>cts<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼‚æ­¥foreach</span>

<span class="token keyword">await</span> list<span class="token punctuation">.</span><span class="token function">ForAsync</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>item<span class="token operator">+</span><span class="token string">&quot;_&quot;</span><span class="token operator">+</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>cts<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼‚æ­¥forï¼Œå¸¦ç´¢å¼•ç¼–å·</span>
<span class="token keyword">await</span> list<span class="token punctuation">.</span><span class="token function">SelectAsync</span><span class="token punctuation">(</span><span class="token keyword">async</span> i<span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼‚æ­¥Select</span>
<span class="token keyword">await</span> list<span class="token punctuation">.</span><span class="token function">SelectAsync</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> item<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼‚æ­¥Selectï¼Œå¸¦ç´¢å¼•ç¼–å·</span>
<span class="token class-name"><span class="token keyword">string</span></span> s<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†å­—ç¬¦ä¸²é›†åˆè¿æ¥æˆé€—å·åˆ†éš”çš„å•å­—ç¬¦ä¸²</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MaxOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å¤§å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MaxOrDefault</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å¤§å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MaxOrDefault</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å¤§å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MinOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å°å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MinOrDefault</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å°å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> max<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">MinOrDefault</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–æœ€å°å€¼ï¼Œå½“é›†åˆä¸ºç©ºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™</span>
<span class="token class-name"><span class="token keyword">var</span></span> stdDev<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>s<span class="token operator">=&gt;</span>s<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">StandardDeviation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ±‚æ ‡å‡†å·®</span>

<span class="token class-name"><span class="token keyword">var</span></span> pages<span class="token operator">=</span>queryable<span class="token punctuation">.</span><span class="token function">ToPagedList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ†é¡µæŸ¥è¯¢</span>
<span class="token class-name"><span class="token keyword">var</span></span> pages<span class="token operator">=</span><span class="token keyword">await</span> queryable<span class="token punctuation">.</span><span class="token function">ToPagedListAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ†é¡µæŸ¥è¯¢</span>

<span class="token class-name"><span class="token keyword">var</span></span> nums<span class="token operator">=</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExceptBy</span><span class="token punctuation">(</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰å­—æ®µå–å·®é›†</span>
<span class="token class-name"><span class="token keyword">var</span></span> nums<span class="token operator">=</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IntersectBy</span><span class="token punctuation">(</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰å­—æ®µå–äº¤é›†</span>
<span class="token class-name"><span class="token keyword">var</span></span> nums<span class="token operator">=</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SequenceEqual</span><span class="token punctuation">(</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">=&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­åºåˆ—ç›¸ç­‰</span>
<span class="token class-name"><span class="token keyword">var</span></span> nums<span class="token operator">=</span>Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderByRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšæœºæ’åº</span>

<span class="token comment">// å¤šä¸ªé›†åˆå–äº¤é›†</span>
<span class="token class-name"><span class="token keyword">var</span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;dd&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;cc&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;dd&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Name<span class="token operator">=</span><span class="token string">&quot;ee&quot;</span><span class="token punctuation">,</span>Age<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> sect<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">IntersectAll</span><span class="token punctuation">(</span>m<span class="token operator">=&gt;</span>m<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// new MyClass(){Name=&quot;cc&quot;,Age=13}</span>

<span class="token class-name"><span class="token keyword">var</span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> sect<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">IntersectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [3]</span>

<span class="token comment">// é›†åˆå…ƒç´ æ”¹å˜å…¶ç´¢å¼•ä½ç½®</span>
list<span class="token punctuation">.</span><span class="token function">ChangeIndex</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å…ƒç´ itemçš„ç´¢å¼•ä½ç½®å˜ä¸ºç¬¬3ä¸ª</span>
list<span class="token punctuation">.</span><span class="token function">ChangeIndex</span><span class="token punctuation">(</span>t<span class="token operator">=&gt;</span>t<span class="token punctuation">.</span>Id<span class="token operator">==</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†idä¸º123çš„å…ƒç´ çš„ç´¢å¼•ä½ç½®å˜ä¸ºç¬¬2ä¸ª</span>

<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">Percentile</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–ç¬¬50%åˆ†ä½æ•°çš„å…ƒç´ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_31-mimeç±»å‹" tabindex="-1"><a class="header-anchor" href="#_31-mimeç±»å‹" aria-hidden="true">#</a> 31.Mimeç±»å‹</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> mimeMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MimeMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> ext <span class="token operator">=</span> mimeMapper<span class="token punctuation">.</span><span class="token function">GetExtensionFromMime</span><span class="token punctuation">(</span><span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// .jpg</span>
<span class="token class-name"><span class="token keyword">var</span></span> mime <span class="token operator">=</span> mimeMapper<span class="token punctuation">.</span><span class="token function">GetMimeFromExtension</span><span class="token punctuation">(</span><span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// image/jpeg</span>

ContentTypeå¸¸é‡åº“ï¼š
<span class="token class-name"><span class="token keyword">var</span></span> type<span class="token operator">=</span>ContentType<span class="token punctuation">.</span>Exe<span class="token punctuation">;</span> <span class="token comment">// application/octet-stream</span>
<span class="token class-name"><span class="token keyword">var</span></span> type<span class="token operator">=</span>ContentType<span class="token punctuation">.</span>Jpeg<span class="token punctuation">;</span> <span class="token comment">// image/jpeg</span>
<span class="token class-name"><span class="token keyword">var</span></span> type<span class="token operator">=</span>DefaultMimeItems<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>t<span class="token operator">=&gt;</span>t<span class="token punctuation">.</span>Extension<span class="token operator">==</span><span class="token string">&quot;jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// image/jpeg</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_32-æ—¥æœŸæ—¶é—´æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_32-æ—¥æœŸæ—¶é—´æ‰©å±•" aria-hidden="true">#</a> 32.æ—¥æœŸæ—¶é—´æ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>
<span class="token class-name"><span class="token keyword">double</span></span> milliseconds <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">GetTotalMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æ¯«ç§’çº§æ—¶é—´æˆ³</span>
<span class="token class-name"><span class="token keyword">double</span></span> microseconds <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">GetTotalMicroseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å¾®ç§’çº§æ—¶é—´æˆ³</span>
<span class="token class-name"><span class="token keyword">double</span></span> nanoseconds <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">GetTotalNanoseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–çº³ç§’çº§æ—¶é—´æˆ³</span>
<span class="token class-name"><span class="token keyword">double</span></span> seconds <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">GetTotalSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–ç§’çº§æ—¶é—´æˆ³</span>
<span class="token class-name"><span class="token keyword">double</span></span> minutes <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">GetTotalMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–åˆ†é’Ÿçº§æ—¶é—´æˆ³</span>

<span class="token class-name"><span class="token keyword">var</span></span> indate<span class="token operator">=</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">In</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
<span class="token class-name">DateTime</span> time<span class="token operator">=</span><span class="token string">&quot;2021-1-1 8:00:00&quot;</span><span class="token punctuation">.</span><span class="token function">ToDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å­—ç¬¦ä¸²è½¬DateTime</span>

<span class="token comment">//æ—¶é—´æ®µè®¡ç®—å·¥å…·</span>
<span class="token class-name"><span class="token keyword">var</span></span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTimeRange</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
range<span class="token punctuation">.</span><span class="token function">Union</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿æ¥ä¸¤ä¸ªæ—¶é—´æ®µï¼Œç»“æœï¼š2020-8-3~2020-8-6</span>
range<span class="token punctuation">.</span><span class="token function">In</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ¤æ–­æ˜¯å¦åœ¨æŸä¸ªæ—¶é—´æ®µå†…ï¼Œtrue</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>intersected<span class="token punctuation">,</span>range2<span class="token punctuation">)</span> <span class="token operator">=</span> range<span class="token punctuation">.</span><span class="token function">Intersect</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸¤ä¸ªæ—¶é—´æ®µæ˜¯å¦ç›¸äº¤ï¼Œ(true,2020-8-3~2020-8-4)</span>
range<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2020-8-4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªæ—¶é—´æ®µï¼Œtrue</span>

range<span class="token punctuation">.</span><span class="token function">GetUnionSet</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>DateTimeRange<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ ¹æ®æŸä¸ªæ—¶é—´æ®µæŸ¥æ‰¾åœ¨æŸæ‰¹æ—¶é—´æ®µä¸­çš„æœ€å¤§å¹¶é›†</span>
range<span class="token punctuation">.</span><span class="token function">GetMaxTimePeriod</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>DateTimeRange<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–ä¸€æ‰¹æ—¶é—´æ®µå†…å­˜åœ¨ç›¸äº’é‡å çš„æœ€å¤§æ—¶é—´æ®µ</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_33-æµç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_33-æµç›¸å…³" aria-hidden="true">#</a> 33.æµç›¸å…³</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>stream<span class="token punctuation">.</span><span class="token function">SaveAsMemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»»æ„æµè½¬æ¢æˆå†…å­˜æµ</span>
stream<span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»»æ„æµè½¬æ¢æˆäºŒè¿›åˆ¶æ•°ç»„</span>
stream<span class="token punctuation">.</span><span class="token function">ToArrayAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»»æ„æµè½¬æ¢æˆäºŒè¿›åˆ¶æ•°ç»„</span>
stream<span class="token punctuation">.</span><span class="token function">ShuffleCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æµæ´—ç ï¼Œåœ¨æµçš„æœ«ç«¯éšå³å¢åŠ å‡ ä¸ªç©ºå­—èŠ‚ï¼Œé‡è¦æ•°æ®è¯·è°¨æ…ä½¿ç”¨ï¼Œå¯èƒ½é€ æˆæµæŸå</span>

<span class="token comment">// æ± åŒ–å†…å­˜æµï¼Œç”¨æ³•ä¸MemorySteamä¿æŒä¸€è‡´</span>
<span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> ms<span class="token operator">=</span><span class="token function">PooledMemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¤§å‹å†…å­˜æµ,æœ€å¤§å¯æ”¯æŒ1TBå†…å­˜æ•°æ®ï¼Œæ¨èå½“æ•°æ®æµå¤§äº2GBæ—¶ä½¿ç”¨ï¼Œç”¨æ³•ä¸MemorySteamä¿æŒä¸€è‡´</span>
<span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> ms<span class="token operator">=</span><span class="token function">LargeMemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//æ–‡ä»¶æµå¿«é€Ÿå¤åˆ¶</span>
<span class="token class-name">FileStream</span> fs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\boot.vmdk&quot;</span><span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>OpenOrCreate<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>ReadWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
        <span class="token comment">//fs.CopyToFile(@&quot;D:\\1.bak&quot;);//åŒæ­¥å¤åˆ¶å¤§æ–‡ä»¶</span>
        fs<span class="token punctuation">.</span><span class="token function">CopyToFileAsync</span><span class="token punctuation">(</span><span class="token string">@&quot;D:\\1.bak&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¼‚æ­¥å¤åˆ¶å¤§æ–‡ä»¶</span>
        <span class="token class-name"><span class="token keyword">string</span></span> md5 <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">GetFileMD5Async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">;</span><span class="token comment">//å¼‚æ­¥è·å–æ–‡ä»¶çš„MD5</span>
        <span class="token class-name"><span class="token keyword">string</span></span> sha1 <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">GetFileSha1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¼‚æ­¥è·å–æ–‡ä»¶çš„SHA1</span>
<span class="token punctuation">}</span>
memoryStream<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span><span class="token string">&quot;filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å†…å­˜æµè½¬å‚¨æˆæ–‡ä»¶</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_34-ç±»å‹æ“ä½œ-å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#_34-ç±»å‹æ“ä½œ-å­—ç¬¦ä¸²" aria-hidden="true">#</a> 34.ç±»å‹æ“ä½œ/å­—ç¬¦ä¸²</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token number">1.2345678901</span><span class="token punctuation">.</span><span class="token function">Digits8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å°æ•°æˆªæ–­ä¸º8ä½</span>
<span class="token number">1.23</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°æ•°è½¬int</span>
<span class="token number">1.23</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°æ•°è½¬TåŸºæœ¬ç±»å‹</span>
<span class="token class-name"><span class="token keyword">bool</span></span> b<span class="token operator">=</span><span class="token number">1.23</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">out</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°æ•°è½¬TåŸºæœ¬ç±»å‹</span>
<span class="token class-name"><span class="token keyword">var</span></span> num<span class="token operator">=</span><span class="token number">1.2345</span><span class="token punctuation">.</span><span class="token function">ToDecimal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è½¬decimalå¹¶ä¿ç•™ä¸¤ä½å°æ•°</span>

<span class="token number">1.23</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ChangeTypeTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å°æ•°è½¬TåŸºæœ¬ç±»å‹,ConvertToå’ŒChangeTypeToçš„åŒºåˆ«åœ¨äºï¼šConvertToåªé€‚ç”¨äºåŸºå…ƒç±»å‹çš„äº’è½¬ï¼ŒChangeTypeToä¸ä»…é€‚ç”¨äºåŸºå…ƒç±»å‹çš„äº’è½¬è¿˜æ”¯æŒæ•°ç»„ã€å­—ç¬¦ä¸²çš„è½¬æ¢(Parse)ï¼ŒConvertToçš„æ€§èƒ½æ›´é«˜</span>

type<span class="token punctuation">.</span><span class="token function">IsPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯å€¼ç±»å‹</span>
type<span class="token punctuation">.</span><span class="token function">IsSimpleType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯å¸¸è§çš„ç®€å•ç±»å‹ï¼ŒåŸºå…ƒç±»å‹ä¸º Booleanã€ Byteã€ SByteã€ Int16ã€ UInt16ã€ Int32ã€ UInt32ã€ Int64ã€ UInt64ã€ IntPtrã€ UIntPtrã€ Charã€ Double ã€ Singleã€æšä¸¾ã€Nullable&lt;T&gt;ã€‚</span>
type<span class="token punctuation">.</span><span class="token function">IsSimpleArrayType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯å¸¸è§ç±»å‹çš„ æ•°ç»„å½¢å¼ ç±»å‹</span>
type<span class="token punctuation">.</span><span class="token function">IsSimpleListType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯å¸¸è§ç±»å‹çš„ æ³›å‹å½¢å¼ ç±»å‹</span>

myClass<span class="token punctuation">.</span><span class="token function">ToJsonString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åºåˆ—åŒ–æˆjsonå­—ç¬¦ä¸²</span>

<span class="token class-name"><span class="token keyword">string</span></span> s<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">bool</span></span> b<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span>
<span class="token class-name"><span class="token keyword">bool</span></span> b<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">NotNullOrEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ¤æ–­å­—ç¬¦ä¸²ä¸ä¸ºç©º</span>
<span class="token class-name"><span class="token keyword">string</span></span> str<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">IfNullOrEmpty</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœä¸ºç©ºåˆ™è¿”å›aa</span>
<span class="token class-name"><span class="token keyword">string</span></span> str<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">IfNullOrEmpty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœä¸ºç©ºåˆ™è¿”å›aa,å»¶è¿Ÿæ‰§è¡Œ</span>

<span class="token class-name"><span class="token keyword">bool</span></span> contains<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«åˆ—è¡¨ä¸­çš„å…³é”®è¯(å¿«é€ŸåŒ¹é…)</span>
<span class="token class-name"><span class="token keyword">bool</span></span> contains<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">ContainsSafety</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«åˆ—è¡¨ä¸­çš„å…³é”®è¯(å®‰å…¨åŒ¹é…)ï¼Œæ²¡æœ‰è®¡æ—¶æ”»å‡»é£é™©</span>
<span class="token class-name"><span class="token keyword">bool</span></span> contains<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">EndsWith</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦ä»¥åˆ—è¡¨ä¸­çš„ä»»æ„å…³é”®è¯ç»“å°¾</span>
<span class="token class-name"><span class="token keyword">bool</span></span> contains<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦ä»¥åˆ—è¡¨ä¸­çš„ä»»æ„å…³é”®è¯å¼€å¤´</span>

<span class="token class-name"><span class="token keyword">string</span></span> str<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–å­—ç¬¦ä¸²å‰10ä¸ªå­—ç¬¦</span>

<span class="token class-name"><span class="token keyword">bool</span></span> emoji<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token function">MatchEmoji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ¹é…å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«emoji</span>

<span class="token class-name"><span class="token keyword">var</span></span> width<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">StringWidth</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—å­—ç¬¦ä¸²ä»¥14å·å­—ä½“å¤§å°çš„æ¸²æŸ“å®½åº¦åƒç´ </span>
<span class="token class-name"><span class="token keyword">var</span></span> width<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">StringWidth</span><span class="token punctuation">(</span><span class="token string">&quot;å¾®è½¯é›…é»‘&quot;</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¡ç®—å­—ç¬¦ä¸²ä»¥14å·å­—ä½“å¤§å°çš„å¾®è½¯é›…é»‘å­—ä½“çš„æ¸²æŸ“å®½åº¦åƒç´ </span>
<span class="token class-name"><span class="token keyword">var</span></span> width<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">CharacterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°</span>
<span class="token class-name"><span class="token keyword">var</span></span> width<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">BytesCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°</span>


<span class="token class-name"><span class="token keyword">var</span></span> s <span class="token operator">=</span> <span class="token string">&quot;ğŸ¤”1ğŸ¥³ağŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦å•Š&quot;</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦ï¼š&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;å®½åº¦ï¼š&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">StringWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;å­—èŠ‚æ•°ï¼š&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">BytesCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 38</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;å­—ç¬¦æ•°ï¼š&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">.</span><span class="token function">CharacterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>

<span class="token class-name"><span class="token keyword">var</span></span> s<span class="token operator">=</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">.</span><span class="token function">ToSBC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è½¬æ¢ä¸ºå…¨è§’</span>
<span class="token class-name"><span class="token keyword">var</span></span> s<span class="token operator">=</span><span class="token string">&quot;ï½ï½&quot;</span><span class="token punctuation">.</span><span class="token function">ToDBC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è½¬æ¢ä¸ºåŠè§’</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_35-inié…ç½®æ–‡ä»¶æ“ä½œ-ä»…æ”¯æŒwindows" tabindex="-1"><a class="header-anchor" href="#_35-inié…ç½®æ–‡ä»¶æ“ä½œ-ä»…æ”¯æŒwindows" aria-hidden="true">#</a> 35.INIé…ç½®æ–‡ä»¶æ“ä½œ(ä»…æ”¯æŒWindows)</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">INIFile</span> ini<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">INIFile</span><span class="token punctuation">(</span><span class="token string">&quot;filename.ini&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ini<span class="token punctuation">.</span><span class="token function">IniWriteValue</span><span class="token punctuation">(</span>section<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å†™å€¼</span>
ini<span class="token punctuation">.</span><span class="token function">IniReadValue</span><span class="token punctuation">(</span>section<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å€¼</span>
ini<span class="token punctuation">.</span><span class="token function">ClearAllSection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºæ‰€æœ‰é…ç½®èŠ‚</span>
ini<span class="token punctuation">.</span><span class="token function">ClearSection</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºé…ç½®èŠ‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_36-é›·è¾¾å›¾è®¡ç®—å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_36-é›·è¾¾å›¾è®¡ç®—å¼•æ“" aria-hidden="true">#</a> 36.é›·è¾¾å›¾è®¡ç®—å¼•æ“</h3><p>åº”ç”¨åœºæ™¯ï¼šè®¡ç®—ä¸¤ä¸ªå¤šè¾¹å½¢çš„ç›¸ä¼¼åº¦ï¼Œç”¨æˆ·ç”»åƒä¹‹ç±»çš„</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> points<span class="token operator">=</span>RadarChartEngine<span class="token punctuation">.</span><span class="token function">ComputeIntersection</span><span class="token punctuation">(</span>chart1<span class="token punctuation">,</span>chart2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–ä¸¤ä¸ªå¤šè¾¹å½¢çš„ç›¸äº¤åŒºåŸŸ</span>
points<span class="token punctuation">.</span><span class="token function">ComputeArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è®¡ç®—å¤šè¾¹å½¢é¢ç§¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_37-æ ‘å½¢ç»“æ„å®ç°" tabindex="-1"><a class="header-anchor" href="#_37-æ ‘å½¢ç»“æ„å®ç°" aria-hidden="true">#</a> 37.æ ‘å½¢ç»“æ„å®ç°</h3><p>åŸºæœ¬æ¥å£ç±»ï¼š ITreeChildrenï¼šå¸¦Childrenå±æ€§çš„æ¥å£ ITreeParentï¼šå¸¦Parentå±æ€§çš„æ¥å£ ITreeï¼šç»§æ‰¿ITreeParentå’ŒITreeChildrenï¼ŒåŒæ—¶å¤šäº†Nameå±æ€§ ITreeEntityï¼šç»§æ‰¿ITreeChildrenï¼ŒåŒæ—¶å¤šäº†Idå’ŒParentIdå±æ€§</p><p>ç›¸å…³æ‰©å±•æ–¹æ³•ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>trees<span class="token punctuation">.</span><span class="token function">Filter</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»æ ‘å½¢é›†åˆä¸­è¿‡æ»¤</span>
trees<span class="token punctuation">.</span><span class="token function">Flatten</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†æ•°æ®å¹³é“ºå¼€</span>
tree<span class="token punctuation">.</span><span class="token function">AllChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ‰€æœ‰çš„å­çº§</span>
tree<span class="token punctuation">.</span><span class="token function">AllParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ‰€æœ‰çš„çˆ¶çº§</span>
tree<span class="token punctuation">.</span><span class="token function">IsRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦æ˜¯æ ¹èŠ‚ç‚¹</span>
tree<span class="token punctuation">.</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹</span>
tree<span class="token punctuation">.</span><span class="token function">Level</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€å¤„æ·±åº¦/å±‚çº§</span>
tree<span class="token punctuation">.</span><span class="token function">Path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¨è·¯å¾„</span>

<span class="token class-name"><span class="token keyword">var</span></span> tree<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">ToTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é›†åˆå…ƒç´ ç»§æ‰¿è‡ªITreeEntity&lt;T,TKey&gt;æˆ–ITreeEntity&lt;T&gt;çš„é›†åˆè½¬æ¢æˆæ ‘å½¢ç»“æ„</span>
<span class="token class-name"><span class="token keyword">var</span></span> tree<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">ToTree</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Pid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é›†åˆå…ƒç´ ç»§æ‰¿è‡ªITreeParent&lt;T&gt;, ITreeChildren&lt;T&gt;çš„é›†åˆè½¬æ¢æˆæ ‘å½¢ç»“æ„</span>
<span class="token class-name"><span class="token keyword">var</span></span> tree<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">ToTreeGeneral</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Pid<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸€èˆ¬çš„é›†åˆè½¬æ¢æˆæ ‘å½¢ç»“æ„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_38-ç®€å•çš„excelå¯¼å‡º" tabindex="-1"><a class="header-anchor" href="#_38-ç®€å•çš„excelå¯¼å‡º" aria-hidden="true">#</a> 38.ç®€å•çš„Excelå¯¼å‡º</h3><p>éœ€è¦é¢å¤–ä¾èµ–åŒ…ï¼š<code>Masuit.Tools.Excel</code></p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> stream<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>item<span class="token operator">=&gt;</span><span class="token keyword">new</span><span class="token punctuation">{</span>
    å§“å<span class="token operator">=</span>item<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
    å¹´é¾„<span class="token operator">=</span>item<span class="token punctuation">.</span>Age<span class="token punctuation">,</span>
    item<span class="token punctuation">.</span>Gender<span class="token punctuation">,</span>
    Avatar<span class="token operator">=</span>Image<span class="token punctuation">.</span><span class="token function">FromStream</span><span class="token punctuation">(</span>filestream<span class="token punctuation">)</span> <span class="token comment">//å›¾ç‰‡åˆ—</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToDataTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToExcel</span><span class="token punctuation">(</span><span class="token string">&quot;Sheet1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è‡ªå®šä¹‰åˆ—åå¯¼å‡º</span>
<span class="token class-name"><span class="token keyword">var</span></span> stream<span class="token operator">=</span>list<span class="token punctuation">.</span><span class="token function">ToDataTable</span><span class="token punctuation">(</span><span class="token string">&quot;Sheet1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToExcel</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶å¯†ç &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸€äº›çº¦å®šè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#ä¸€äº›çº¦å®šè§„åˆ™" aria-hidden="true">#</a> ä¸€äº›çº¦å®šè§„åˆ™ï¼š</h4><ol><li>å›¾ç‰‡åˆ—æ”¯æŒStreamã€Bitmapã€IEnumerable <code>&lt;Stream&gt;</code>ã€IEnumerable <code>&lt;Bitmap&gt;</code>ã€IDictionary&lt;string,Stream&gt;ã€IDictionary&lt;string,MemoryStream&gt;ã€IDictionary&lt;string,Bitmap&gt;ç±»å‹ï¼›</li><li>å…¶ä¸­ï¼Œå¦‚æœæ˜¯IDictionaryç±»å‹çš„å›¾ç‰‡åˆ—ï¼Œå­—å…¸çš„é”®ä¸ºå›¾ç‰‡è¶…é“¾æ¥çš„å®Œæ•´urlï¼›</li><li>é»˜è®¤å­—æ®µåä½œä¸ºåˆ—åå¯¼å‡ºï¼›</li><li>è‹¥listæ˜¯ä¸€ä¸ªå…·ä½“çš„å¼ºç±»å‹ï¼Œé»˜è®¤ä¼šå…ˆæŸ¥æ‰¾æ¯ä¸ªå­—æ®µçš„Descriptionæ ‡è®°ï¼Œè‹¥æœ‰Descriptionæ ‡è®°ï¼Œåˆ™å–Descriptionæ ‡è®°ä½œä¸ºåˆ—åæ˜¾ç¤º</li><li>ToExcelæ–¹æ³•æ”¯æŒDataTableã€List <code>&lt;DataTable&gt;</code>ã€Dictionary&lt;string, DataTable&gt;ç±»å‹çš„ç›´æ¥è°ƒç”¨</li></ol><h3 id="_39-efcoreå®ç”¨æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_39-efcoreå®ç”¨æ‰©å±•" aria-hidden="true">#</a> 39.EFCoreå®ç”¨æ‰©å±•</h3><h4 id="è·Ÿè¸ªå®ä½“å˜æ›´å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#è·Ÿè¸ªå®ä½“å˜æ›´å¯¹æ¯”" aria-hidden="true">#</a> è·Ÿè¸ªå®ä½“å˜æ›´å¯¹æ¯”</h4><p>è·å–æŒ‡å®šå®ä½“çš„å˜æ›´</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> changes<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetChanges</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEntity<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å˜æ›´å­—æ®µä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> added<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetAdded</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEntity<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–æ·»åŠ çš„å®ä½“å­—æ®µä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> removed<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRemoved</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEntity<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–è¢«ç§»é™¤çš„å®ä½“å­—æ®µä¿¡æ¯  </span>
<span class="token class-name"><span class="token keyword">var</span></span> allchanges<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetAllChanges</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TEntity<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å¢åˆ æ”¹çš„å®ä½“å­—æ®µä¿¡æ¯  </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–æ‰€æœ‰å®ä½“çš„å˜æ›´</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> changes<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token function">GetChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å˜æ›´å­—æ®µä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> added<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token function">GetAdded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–æ·»åŠ çš„å®ä½“å­—æ®µä¿¡æ¯</span>
<span class="token class-name"><span class="token keyword">var</span></span> removed<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token function">GetRemoved</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–è¢«ç§»é™¤çš„å®ä½“å­—æ®µä¿¡æ¯  </span>
<span class="token class-name"><span class="token keyword">var</span></span> allchanges<span class="token operator">=</span>dbContext<span class="token punctuation">.</span><span class="token function">GetAllChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å¢åˆ æ”¹çš„å®ä½“å­—æ®µä¿¡æ¯  </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹æ¯”ä¿¡æ¯åŒ…å«å±æ€§ä¿¡æ¯ã€æ—§å€¼ã€æ–°å€¼ã€å®ä½“ä¿¡æ¯ã€é”®ä¿¡æ¯ã€å˜æ›´çŠ¶æ€ç­‰</p><h4 id="nolockæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#nolockæŸ¥è¯¢" aria-hidden="true">#</a> nolockæŸ¥è¯¢</h4><p>sqlserverï¼š</p><p>ä¸Šä¸‹æ–‡æ³¨å…¥Interceptorå³å¯åœ¨ä»»ä½•æŸ¥è¯¢æ—¶ä½¿ç”¨nolockæŸ¥è¯¢</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>opt <span class="token operator">=&gt;</span> opt<span class="token punctuation">.</span><span class="token function">UseSqlserver</span><span class="token punctuation">(</span><span class="token string">&quot;ConnString&quot;</span><span class="token punctuation">,</span> builder <span class="token operator">=&gt;</span> builder<span class="token punctuation">.</span><span class="token function">AddInterceptors</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryWithNoLockDbCommandInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é€šç”¨æ•°æ®åº“ï¼š</p><p>nolockæœ¬è´¨æ˜¯å¼€å¯ä¸€ä¸ª <code>è¯»æœªæäº¤</code>çº§åˆ«çš„äº‹åŠ¡ï¼Œæ­¤æ—¶çš„æŸ¥è¯¢æ€§èƒ½æœ€å¥½ï¼Œä½†æœ‰å¯èƒ½ä¼šè¯»å–åˆ°è„æ•°æ®ã€‚</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>dbcontext<span class="token punctuation">.</span><span class="token function">NoLock</span><span class="token punctuation">(</span>ctx<span class="token operator">=&gt;</span>ctx<span class="token punctuation">.</span>Users<span class="token range operator">..</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼€å¯ä¸€ä¸ªnolockä¸Šä¸‹æ–‡ï¼Œä¸Šä¸‹æ–‡èŒƒå›´å†…è‡ªåŠ¨nolock</span>

<span class="token comment">// æ‰§è¡Œå•ä¸ªnolockæŸ¥è¯¢</span>
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToListWithNoLockAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefaultWithNoLockAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SingleOrDefaultWithNoLockAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">AnyWithNoLockAsync</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">AllWithNoLockAsync</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">await</span> dbcontext<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">CountWithNoLockAsync</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// å¦‚æœåœ¨ä¸Šä¸‹æ–‡å¼€å¯äº†é‡è¯•æœºåˆ¶,æ‰§è¡Œå•ä¸ªnolockæŸ¥è¯¢éœ€è¦å¼€å¯ç­–ç•¥æŸ¥è¯¢</span>
services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>opt <span class="token operator">=&gt;</span> opt<span class="token punctuation">.</span><span class="token function">UseNpgsql</span><span class="token punctuation">(</span><span class="token string">&quot;ConnString&quot;</span><span class="token punctuation">,</span> builder <span class="token operator">=&gt;</span> builder<span class="token punctuation">.</span><span class="token function">EnableRetryOnFailure</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ‰§è¡Œç­–ç•¥</span>
dbcontext<span class="token punctuation">.</span><span class="token function">ExecutionStrategy</span><span class="token punctuation">(</span>stg<span class="token operator">=&gt;</span>stg<span class="token punctuation">.</span><span class="token function">NoLock</span><span class="token punctuation">(</span>ctx<span class="token operator">=&gt;</span>ctx<span class="token punctuation">.</span>Users<span class="token range operator">..</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dbcontext<span class="token punctuation">.</span><span class="token function">ExecutionStrategy</span><span class="token punctuation">(</span>ctx<span class="token operator">=&gt;</span>ctx<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token punctuation">.</span>Name<span class="token operator">==</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToListWithNoLockAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è‡ªåŠ¨é€’å½’å¼includeæ‰©å±•-é€šå¸¸ç”¨äºæ ‘å½¢è¡¨" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é€’å½’å¼includeæ‰©å±•-é€šå¸¸ç”¨äºæ ‘å½¢è¡¨" aria-hidden="true">#</a> è‡ªåŠ¨é€’å½’å¼Includeæ‰©å±•(é€šå¸¸ç”¨äºæ ‘å½¢è¡¨)</h4><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// å¦‚æœä½ ç°åœ¨æ­£åœ¨å†™ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</span>
dbcontext<span class="token punctuation">.</span>Category<span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>c<span class="token operator">=&gt;</span>c<span class="token punctuation">.</span>Children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThenInclude</span><span class="token punctuation">(</span>c<span class="token operator">=&gt;</span>c<span class="token punctuation">.</span>Children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThenInclude</span><span class="token punctuation">(</span>c<span class="token operator">=&gt;</span>c<span class="token punctuation">.</span>Children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ThenInclude</span><span class="token punctuation">(</span>c<span class="token operator">=&gt;</span>c<span class="token punctuation">.</span>Children<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é‚£ä¹ˆå¯ä»¥æ”¹æˆè¿™æ ·ï¼š</span>
dbcontext<span class="token punctuation">.</span>Category<span class="token punctuation">.</span><span class="token function">IncludeRecursive</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Children<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‡ªåŠ¨Include 4æ¬¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_40-ä»»ä½•ç±»å‹æ”¯æŒé“¾å¼è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_40-ä»»ä½•ç±»å‹æ”¯æŒé“¾å¼è°ƒç”¨" aria-hidden="true">#</a> 40.ä»»ä½•ç±»å‹æ”¯æŒé“¾å¼è°ƒç”¨</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>a<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>func2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>func3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>s<span class="token operator">=&gt;</span>s<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>x<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>x<span class="token operator">=&gt;</span>Math<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_41-newtonsoft-jsonå’Œsystem-text-jsonçš„åªå…è®¸å­—æ®µ-å-åºåˆ—åŒ–è¡Œä¸ºçš„å¥‘çº¦è§£é‡Šå™¨" tabindex="-1"><a class="header-anchor" href="#_41-newtonsoft-jsonå’Œsystem-text-jsonçš„åªå…è®¸å­—æ®µ-å-åºåˆ—åŒ–è¡Œä¸ºçš„å¥‘çº¦è§£é‡Šå™¨" aria-hidden="true">#</a> 41.Newtonsoft.Jsonå’ŒSystem.Text.Jsonçš„åªå…è®¸å­—æ®µ(å)åºåˆ—åŒ–è¡Œä¸ºçš„å¥‘çº¦è§£é‡Šå™¨</h3><h4 id="deserializeonlycontractresolver" tabindex="-1"><a class="header-anchor" href="#deserializeonlycontractresolver" aria-hidden="true">#</a> DeserializeOnlyContractResolver</h4><p>è¯¥è§£é‡Šå™¨é’ˆå¯¹ç±»å±æ€§è¢«DeserializeOnlyJsonPropertyAttribute/SerializeIgnoreAttributeæ ‡è®°çš„ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ç”Ÿæ•ˆï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™å¿½ç•¥;è¢«SerializeOnlyJsonPropertyAttribute/DeserializeIgnoreAttributeæ ‡è®°çš„ï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™ç”Ÿæ•ˆï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™å¿½ç•¥</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassDto</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// åºåˆ—åŒ–æ—¶å¿½ç•¥è¿™ä¸ªå±æ€§/ååºåˆ—åŒ–æ—¶åŠ è½½è¿™ä¸ªå±æ€§</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DeserializeOnlyJsonProperty</span></span><span class="token punctuation">]</span>
        <span class="token comment">//[SerializeIgnore]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MyProperty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// ååºåˆ—åŒ–æ—¶å¿½ç•¥è¿™ä¸ªå±æ€§/åºåˆ—åŒ–æ—¶åŠ è½½è¿™ä¸ªå±æ€§</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeOnlyJsonProperty</span></span><span class="token punctuation">]</span>
        <span class="token comment">//[DeserializeIgnore]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Num <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    <span class="token comment">// Newtonsoft.Json</span>
    JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonSerializerSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ContractResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DeserializeOnlyContractResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é…ç½®ä½¿ç”¨DeserializeOnlyContractResolverè§£é‡Šå™¨</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// System.Text.Json</span>
    JsonSerializer<span class="token punctuation">.</span><span class="token function">Serialize</span><span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonSerializerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> TypeInfoResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SerializeIgnoreResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯WebAPIå…¨å±€ä½¿ç”¨ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>        <span class="token comment">//åœ¨Startup.ConfigureServicesä¸­</span>
        services<span class="token punctuation">.</span><span class="token function">AddMvc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddNewtonsoftJson</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
             <span class="token punctuation">{</span>
                 <span class="token class-name"><span class="token keyword">var</span></span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DeserializeOnlyContractResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 resolver<span class="token punctuation">.</span>NamingStrategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CamelCaseNamingStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 options<span class="token punctuation">.</span>SerializerSettings<span class="token punctuation">.</span>ContractResolver <span class="token operator">=</span> resolver<span class="token punctuation">;</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="fallbackjsonpropertyresolver" tabindex="-1"><a class="header-anchor" href="#fallbackjsonpropertyresolver" aria-hidden="true">#</a> FallbackJsonPropertyResolver</h4><p>è¯¥è§£é‡Šå™¨é’ˆå¯¹æŸä¸ªå±æ€§è®¾ç½®å¤šä¸ªåˆ«åï¼Œååºåˆ—åŒ–æ—¶æ”¯æŒå¤šä¸ªåˆ«åkeyè¿›è¡Œç»‘å®šï¼Œå¼¥è¡¥å®˜æ–¹JsonPropertyåˆ«åå±æ€§åªèƒ½è®¾ç½®å•ä¸€åˆ«åçš„ä¸è¶³</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassDto</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FallbackJsonProperty</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MyProperty&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MyProperty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Num <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
    JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonSerializerSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ContractResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FallbackJsonPropertyResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é…ç½®ä½¿ç”¨FallbackJsonPropertyResolverè§£é‡Šå™¨</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="compositecontractresolver" tabindex="-1"><a class="header-anchor" href="#compositecontractresolver" aria-hidden="true">#</a> CompositeContractResolver</h4><p>è¯¥è§£é‡Šå™¨æ˜¯DeserializeOnlyContractResolverå’ŒFallbackJsonPropertyResolverçš„èåˆç‰ˆ</p><h3 id="_42-asp-net-core-actionåŒæ—¶æ”¯æŒquerystringã€è¡¨å•å’Œjsonè¯·æ±‚ç±»å‹çš„æ¨¡å‹ç»‘ç‚¹å™¨bodyordefaultmodelbinder" tabindex="-1"><a class="header-anchor" href="#_42-asp-net-core-actionåŒæ—¶æ”¯æŒquerystringã€è¡¨å•å’Œjsonè¯·æ±‚ç±»å‹çš„æ¨¡å‹ç»‘ç‚¹å™¨bodyordefaultmodelbinder" aria-hidden="true">#</a> 42. ASP.NET Core ActionåŒæ—¶æ”¯æŒqueryStringã€è¡¨å•å’Œjsonè¯·æ±‚ç±»å‹çš„æ¨¡å‹ç»‘ç‚¹å™¨BodyOrDefaultModelBinder</h3><p>ç”¨æ³•ï¼š å¼•å…¥åŒ…ï¼š<code>Masuit.Tools.AspNetCore</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PM<span class="token operator">&gt;</span> Install-Package Masuit.Tools.AspNetCore
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Startupé…ç½®ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">UseBodyOrDefaultModelBinder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨actionçš„å‚æ•°æ¨¡å‹å‰æ‰“ä¸Šæ ‡è®°ï¼š<code>[FromBodyOrDefault]</code>å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span><span class="token class-name">HttpPost</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBodyOrDefault</span></span><span class="token punctuation">]</span><span class="token class-name">QueryModel</span> query<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
  
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span><span class="token class-name">HttpPost</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBodyOrDefault</span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBodyOrDefault</span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_43-å­—ç¬¦ä¸²simhashç›¸ä¼¼åº¦ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_43-å­—ç¬¦ä¸²simhashç›¸ä¼¼åº¦ç®—æ³•" aria-hidden="true">#</a> 43. å­—ç¬¦ä¸²SimHashç›¸ä¼¼åº¦ç®—æ³•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> dis<span class="token operator">=</span><span class="token string">&quot;12345678&quot;</span><span class="token punctuation">.</span><span class="token function">HammingDistance</span><span class="token punctuation">(</span><span class="token string">&quot;1234567&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> dis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SimHash</span><span class="token punctuation">(</span><span class="token string">&quot;12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">HammingDistance</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SimHash</span><span class="token punctuation">(</span><span class="token string">&quot;1234567&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_44-çœŸå®æ–‡ä»¶ç±»å‹æ¢æµ‹" tabindex="-1"><a class="header-anchor" href="#_44-çœŸå®æ–‡ä»¶ç±»å‹æ¢æµ‹" aria-hidden="true">#</a> 44. çœŸå®æ–‡ä»¶ç±»å‹æ¢æµ‹</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// å¤šç§æ–¹å¼ï¼Œä»»å›è°ƒç”¨</span>
<span class="token class-name"><span class="token keyword">var</span></span> detector<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileInfo</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">DetectFiletype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//var detector=File.OpenRead(filepath).DetectFiletype();</span>
<span class="token comment">//var detector=FileSignatureDetector.DetectFiletype(filepath);</span>
detector<span class="token punctuation">.</span>Precondition<span class="token punctuation">;</span><span class="token comment">//åŸºç¡€æ–‡ä»¶ç±»å‹</span>
detector<span class="token punctuation">.</span>Extension<span class="token punctuation">;</span><span class="token comment">//çœŸå®æ‰©å±•å</span>
detector<span class="token punctuation">.</span>MimeType<span class="token punctuation">;</span><span class="token comment">//MimeType</span>
detector<span class="token punctuation">.</span>FormatCategories<span class="token punctuation">;</span><span class="token comment">//æ ¼å¼ç±»åˆ«</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é»˜è®¤æ”¯æŒçš„æ–‡ä»¶ç±»å‹" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤æ”¯æŒçš„æ–‡ä»¶ç±»å‹" aria-hidden="true">#</a> é»˜è®¤æ”¯æŒçš„æ–‡ä»¶ç±»å‹</h4><table><thead><tr><th style="text-align:center;">æ‰©å±•å</th><th style="text-align:center;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;">3GP</td><td style="text-align:center;">3GPP, 3GPP 2</td></tr><tr><td style="text-align:center;">7Z</td><td style="text-align:center;">7-Zip</td></tr><tr><td style="text-align:center;">APK</td><td style="text-align:center;">ZIP based Android Package</td></tr><tr><td style="text-align:center;">AVI</td><td style="text-align:center;">Audio-Video Interleave</td></tr><tr><td style="text-align:center;">SH</td><td style="text-align:center;">Shell Script</td></tr><tr><td style="text-align:center;">BPLIST</td><td style="text-align:center;">Binary Property List</td></tr><tr><td style="text-align:center;">BMP, DIB</td><td style="text-align:center;">Bitmap</td></tr><tr><td style="text-align:center;">BZ2</td><td style="text-align:center;">Bunzip2 Compressed</td></tr><tr><td style="text-align:center;">CAB</td><td style="text-align:center;">Microsoft Cabinet</td></tr><tr><td style="text-align:center;">CLASS</td><td style="text-align:center;">Java Bytecode</td></tr><tr><td style="text-align:center;">CONFIG</td><td style="text-align:center;">.NET Configuration File</td></tr><tr><td style="text-align:center;">CRT, CERT</td><td style="text-align:center;">Certificate</td></tr><tr><td style="text-align:center;">CUR</td><td style="text-align:center;">Cursor</td></tr><tr><td style="text-align:center;">DB</td><td style="text-align:center;">Windows Thumbs.db Thumbnail Database</td></tr><tr><td style="text-align:center;">DDS</td><td style="text-align:center;">DirectDraw Surface</td></tr><tr><td style="text-align:center;">DLL</td><td style="text-align:center;">Windows Dynamic Linkage Library</td></tr><tr><td style="text-align:center;">DMG</td><td style="text-align:center;">Apple Disk Mount Image</td></tr><tr><td style="text-align:center;">DMP</td><td style="text-align:center;">Windows Memory Dump File</td></tr><tr><td style="text-align:center;">DOC</td><td style="text-align:center;">Microsoft Office Word 97-2003 Document</td></tr><tr><td style="text-align:center;">DOCX</td><td style="text-align:center;">Microsoft Office Word OpenXML Document</td></tr><tr><td style="text-align:center;">EPUB</td><td style="text-align:center;">e-Pub Document</td></tr><tr><td style="text-align:center;">EXE</td><td style="text-align:center;">Windows Executive</td></tr><tr><td style="text-align:center;">FLAC</td><td style="text-align:center;">Loseless Audio</td></tr><tr><td style="text-align:center;">FLV</td><td style="text-align:center;">Flash Video</td></tr><tr><td style="text-align:center;">GIF</td><td style="text-align:center;">Graphics Interchage Format</td></tr><tr><td style="text-align:center;">GZ</td><td style="text-align:center;">GZ Compressed</td></tr><tr><td style="text-align:center;">HDP</td><td style="text-align:center;">HD Photo(JPEG XR) Image</td></tr><tr><td style="text-align:center;">HWP</td><td style="text-align:center;">Legacy HWP, HWPML, CFBF HWP</td></tr><tr><td style="text-align:center;">ICO</td><td style="text-align:center;">Icon</td></tr><tr><td style="text-align:center;">INI</td><td style="text-align:center;">Initialization File</td></tr><tr><td style="text-align:center;">ISO</td><td style="text-align:center;">ISO-9660 Disc Image</td></tr><tr><td style="text-align:center;">LNK</td><td style="text-align:center;">Windows Shortcut Link</td></tr><tr><td style="text-align:center;">JP2</td><td style="text-align:center;">JPEG 2000 Image</td></tr><tr><td style="text-align:center;">JPG, JPEG</td><td style="text-align:center;">Joint Photographic Experts Group Image</td></tr><tr><td style="text-align:center;">LZH</td><td style="text-align:center;">LZH Compressed</td></tr><tr><td style="text-align:center;">M4A</td><td style="text-align:center;">MP4 Container Contained Audio Only</td></tr><tr><td style="text-align:center;">M4V</td><td style="text-align:center;">MP4 Container Contained Video</td></tr><tr><td style="text-align:center;">MID</td><td style="text-align:center;">Midi Sound</td></tr><tr><td style="text-align:center;">MKA</td><td style="text-align:center;">Matroska Container Contained Audio Only</td></tr><tr><td style="text-align:center;">MKV</td><td style="text-align:center;">Matroska Container Contained Video</td></tr><tr><td style="text-align:center;">MOV</td><td style="text-align:center;">QuickTime Movie Video</td></tr><tr><td style="text-align:center;">MP4</td><td style="text-align:center;">MP4 Container Contained Contents</td></tr><tr><td style="text-align:center;">MSI</td><td style="text-align:center;">Microsoft Installer</td></tr><tr><td style="text-align:center;">OGG</td><td style="text-align:center;">OGG Video or Audio</td></tr><tr><td style="text-align:center;">ODF</td><td style="text-align:center;">OpenDocument Formula</td></tr><tr><td style="text-align:center;">ODG</td><td style="text-align:center;">OpenDocument Graphics</td></tr><tr><td style="text-align:center;">ODP</td><td style="text-align:center;">OpenDocument Presentation</td></tr><tr><td style="text-align:center;">ODS</td><td style="text-align:center;">OpenDocument Spreadsheet</td></tr><tr><td style="text-align:center;">ODT</td><td style="text-align:center;">OpenDocument Text</td></tr><tr><td style="text-align:center;">PAK</td><td style="text-align:center;">PAK Archive or Quake Archive</td></tr><tr><td style="text-align:center;">PDB</td><td style="text-align:center;">Microsoft Program Database</td></tr><tr><td style="text-align:center;">PDF</td><td style="text-align:center;">Portable Document Format</td></tr><tr><td style="text-align:center;">PFX</td><td style="text-align:center;">Microsoft Personal Information Exchange Certificate</td></tr><tr><td style="text-align:center;">PNG</td><td style="text-align:center;">Portable Network Graphics Image</td></tr><tr><td style="text-align:center;">PPT</td><td style="text-align:center;">Microsoft Office PowerPoint 97-2003 Document</td></tr><tr><td style="text-align:center;">PPTX</td><td style="text-align:center;">Microsoft Office PowerPoint OpenXML Document</td></tr><tr><td style="text-align:center;">PPSX</td><td style="text-align:center;">Microsoft Office PowerPoint OpenXML Document for Slideshow only</td></tr><tr><td style="text-align:center;">PSD</td><td style="text-align:center;">Photoshop Document</td></tr><tr><td style="text-align:center;">RAR</td><td style="text-align:center;">WinRAR Compressed</td></tr><tr><td style="text-align:center;">REG</td><td style="text-align:center;">Windows Registry</td></tr><tr><td style="text-align:center;">RPM</td><td style="text-align:center;">RedHat Package Manager Package</td></tr><tr><td style="text-align:center;">RTF</td><td style="text-align:center;">Rich Text Format Document</td></tr><tr><td style="text-align:center;">SLN</td><td style="text-align:center;">Microsoft Visual Studio Solution</td></tr><tr><td style="text-align:center;">SRT</td><td style="text-align:center;">SubRip Subtitle</td></tr><tr><td style="text-align:center;">SWF</td><td style="text-align:center;">Shockwave Flash</td></tr><tr><td style="text-align:center;">SQLITE, DB</td><td style="text-align:center;">SQLite Database</td></tr><tr><td style="text-align:center;">TAR</td><td style="text-align:center;">pre-ISO Type and UStar Type TAR Package</td></tr><tr><td style="text-align:center;">TIFF</td><td style="text-align:center;">Tagged Image File Format Image</td></tr><tr><td style="text-align:center;">TXT</td><td style="text-align:center;">Plain Text</td></tr><tr><td style="text-align:center;">WAV</td><td style="text-align:center;">Wave Audio</td></tr><tr><td style="text-align:center;">WASM</td><td style="text-align:center;">Binary WebAssembly</td></tr><tr><td style="text-align:center;">WEBM</td><td style="text-align:center;">WebM Video</td></tr><tr><td style="text-align:center;">WEBP</td><td style="text-align:center;">WebP Image</td></tr><tr><td style="text-align:center;">XAR</td><td style="text-align:center;">XAR Package</td></tr><tr><td style="text-align:center;">XLS</td><td style="text-align:center;">Microsoft Office Excel 97-2003 Document</td></tr><tr><td style="text-align:center;">XLSX</td><td style="text-align:center;">Microsoft Office Excep OpenXML Document</td></tr><tr><td style="text-align:center;">XML</td><td style="text-align:center;">Extensible Markup Language Document</td></tr><tr><td style="text-align:center;">Z</td><td style="text-align:center;">Z Compressed</td></tr><tr><td style="text-align:center;">ZIP</td><td style="text-align:center;">ZIP Package</td></tr></tbody></table><h3 id="_45-åŠ¨æ€ç±»å‹æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_45-åŠ¨æ€ç±»å‹æ‰©å±•" aria-hidden="true">#</a> 45. åŠ¨æ€ç±»å‹æ‰©å±•</h3><p>è®©åŠ¨æ€ç±»å‹æ”¯æŒå±æ€§è®¿é—®å™¨å’Œç´¢å¼•å™¨è°ƒç”¨</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>        <span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token operator">=</span> DynamicFactory<span class="token punctuation">.</span><span class="token function">NewObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;Masuit&quot;</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">[</span><span class="token string">&quot;Gender&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;ç”·&quot;</span>
        obj<span class="token punctuation">.</span>MyClass <span class="token operator">=</span> DynamicFactory<span class="token punctuation">.</span><span class="token function">WithObject</span><span class="token punctuation">(</span><span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            X <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
            Y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
            Z <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> obj<span class="token punctuation">[</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">&quot;Gender&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>Gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span><span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;Z&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ™®é€šç±»å‹è½¬æ¢æˆåŠ¨æ€ç±»å‹</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>        <span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token operator">=</span> <span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">&quot;Masuit&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>MyClass <span class="token operator">=</span> <span class="token keyword">new</span>
        <span class="token punctuation">{</span>
            X <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
            Y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
            Z <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>Prop <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
        _ <span class="token operator">=</span> obj <span class="token operator">-</span> <span class="token string">&quot;Prop&quot;</span><span class="token punctuation">;</span> <span class="token comment">// åˆ é™¤å±æ€§</span>
        _ <span class="token operator">=</span> obj <span class="token operator">+</span> <span class="token string">&quot;Prop&quot;</span><span class="token punctuation">;</span> <span class="token comment">// å¢åŠ å±æ€§</span>

        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> obj<span class="token punctuation">[</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_46-åç—…æ¯’-ä»…æ”¯æŒwindows" tabindex="-1"><a class="header-anchor" href="#_46-åç—…æ¯’-ä»…æ”¯æŒwindows" aria-hidden="true">#</a> 46. åç—…æ¯’(ä»…æ”¯æŒWindows)</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// è¦æ±‚ç³»ç»ŸWindowsDefenderæ²¡æœ‰è¢«åœæ‰</span>
<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> WindowsDefenderScanService<span class="token punctuation">.</span><span class="token function">ScanFile</span><span class="token punctuation">(</span><span class="token string">@&quot;Y:\\1.exe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰«ææ–‡ä»¶</span>
<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> WindowsDefenderScanService<span class="token punctuation">.</span><span class="token function">ScanDirectory</span><span class="token punctuation">(</span><span class="token string">@&quot;Y:\\&quot;); // æ‰«ææ–‡ä»¶å¤¹
var result = WindowsDefenderScanService.ScanStream(stream); // æ‰«ææ–‡ä»¶æµ

// è¦æ±‚C:\\Windows\\System32\\amsi.dllæ–‡ä»¶å­˜åœ¨ï¼Œå¯åœ¨WindowsDefenderåœæ­¢æ—¶å·¥ä½œ
AmsiScanService.Scan(stream); // æ‰«ææ–‡ä»¶æµ
AmsiScanService.Scan(@&quot;</span>Y<span class="token punctuation">:</span>\\<span class="token number">1</span><span class="token punctuation">.</span>exe&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰«ææ–‡ä»¶</span>
AmsiScanService<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰«æäºŒè¿›åˆ¶æ•°ç»„</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_47-ç”ŸæˆéªŒè¯ç " tabindex="-1"><a class="header-anchor" href="#_47-ç”ŸæˆéªŒè¯ç " aria-hidden="true">#</a> 47. ç”ŸæˆéªŒè¯ç </h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> code<span class="token operator">=</span>ValidateCode<span class="token punctuation">.</span><span class="token function">ValidateCode</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”Ÿæˆ6ä½é•¿åº¦çš„éªŒè¯ç </span>
<span class="token class-name"><span class="token keyword">var</span></span> stream<span class="token operator">=</span>code<span class="token punctuation">.</span><span class="token function">CreateValidateGraphic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”ŸæˆéªŒè¯ç å›¾ç‰‡æµ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_48-distributedcacheæ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_48-distributedcacheæ‰©å±•" aria-hidden="true">#</a> 48. DistributedCacheæ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–å€¼</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetOrAdd</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æˆ–æ·»åŠ å€¼</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetOrAdd</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>valueFactory<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æˆ–æ·»åŠ å€¼</span>
cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Set</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å€¼</span>
cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddOrUpdate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token keyword">value</span><span class="token punctuation">,</span>valueFactory<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ·»åŠ æˆ–æ›´æ–°å€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_49-viewdataæ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_49-viewdataæ‰©å±•" aria-hidden="true">#</a> 49. ViewDataæ‰©å±•</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>ViewData<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å¯¹è±¡</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>ViewData<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValueOrDefault</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å¯¹è±¡</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>ViewData<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValueOrDefault</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>defaultValueFactory<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_50-çº¿ç¨‹ä¸Šä¸‹æ–‡å­˜å–ä¸´æ—¶å€¼" tabindex="-1"><a class="header-anchor" href="#_50-çº¿ç¨‹ä¸Šä¸‹æ–‡å­˜å–ä¸´æ—¶å€¼" aria-hidden="true">#</a> 50. çº¿ç¨‹ä¸Šä¸‹æ–‡å­˜å–ä¸´æ—¶å€¼</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>CurrentContext<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å€¼</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>CurrentContext<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">GetData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å€¼</span>

CurrentContext<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å€¼</span>
<span class="token class-name"><span class="token keyword">var</span></span> item<span class="token operator">=</span>CurrentContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetData</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_51-asp-net-coreè‡ªåŠ¨æ‰«ææ³¨å†ŒæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_51-asp-net-coreè‡ªåŠ¨æ‰«ææ³¨å†ŒæœåŠ¡" aria-hidden="true">#</a> 51. ASP.NET Coreè‡ªåŠ¨æ‰«ææ³¨å†ŒæœåŠ¡</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">// è‡ªåŠ¨æ‰«ææ³¨å†ŒæœåŠ¡</span>
services<span class="token punctuation">.</span><span class="token function">AutoRegisterServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// éœ€è¦è‡ªåŠ¨æ³¨å†Œçš„æœåŠ¡æ‰“ä¸ŠServiceInjectæ ‡è®°å³å¯ã€‚</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServiceInject</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">:</span><span class="token type-list"><span class="token class-name">MyInterface</span></span><span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ServiceInject</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span><span class="token punctuation">{</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_52-æˆ¿è´·è¯•ç®—æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_52-æˆ¿è´·è¯•ç®—æ¨¡å‹" aria-hidden="true">#</a> 52. æˆ¿è´·è¯•ç®—æ¨¡å‹</h3><p>é›†æˆæ¡ˆä¾‹ï¼šhttps://masuit.org/tools/loan</p><p><strong>æ”¯æŒå¤šæ¬¡æå‰è¿˜æ¬¾å’Œå¤šæ¬¡è°ƒæ•´åˆ©ç‡ï¼ŒåŒæ—¶æ”¯æŒæå‰è¿˜æ¬¾æ—¶å˜æ›´è´·æ¬¾æ–¹å¼å’Œç¼©çŸ­å¹´é™ï¼Œå¦‚æœ‰åˆ©ç‡è°ƒæ•´æˆ–æå‰è¿˜æ¬¾è®¡åˆ’ï¼Œå› é“¶è¡Œè®¡ç®—å—å®æ—¶åˆ©ç‡æˆ–æå‰è¿˜æ¬¾è¿çº¦é‡‘å½±å“ï¼Œæœ¬è¯•ç®—æ¨¡å‹çš„è®¡ç®—ç»“æœå’Œé“¶è¡Œç»“æœå¤§çº¦æœ‰1â€°çš„è¯¯å·®ï¼Œç»“æœä»…ä¾›å‚è€ƒï¼Œè¯·ä»¥é“¶è¡Œç»“æœä¸ºå‡†ã€‚</strong></p><p>æ¨¡æ‹Ÿæ¡ˆä¾‹ï¼š è´·æ¬¾100ä¸‡ï¼Œ åˆå§‹åˆ©ç‡6.27%ï¼Œ ç­‰é¢æœ¬æ¯æ–¹å¼ï¼Œ è´·30å¹´ï¼Œ é¦–æ¬¡è¿˜æ¬¾æ—¶é—´2021-2-1ã€‚</p><p>åˆ©ç‡è°ƒæ•´ï¼š 2022-1-1åˆ©ç‡è°ƒæ•´ä¸º5.92%ï¼ŒLPRè°ƒæ•´ 2023-1-1åˆ©ç‡è°ƒæ•´ä¸º5.85%ï¼ŒLPRè°ƒæ•´ 2023-9-25åˆ©ç‡è°ƒæ•´ä¸º4.3%ï¼Œæ”¿ç­–å› ç´ é“¶è¡Œè‡ªåŠ¨è°ƒæ•´ 2025-1-1åˆ©ç‡è°ƒæ•´ä¸º4.2%ï¼ŒLPRè°ƒæ•´ 2026-1-1åˆ©ç‡è°ƒæ•´ä¸º4.1%ï¼ŒLPRè°ƒæ•´</p><p>æå‰è¿˜æ¬¾è®¡åˆ’ï¼š 2022-10-23æå‰è¿˜æ¬¾10ä¸‡ï¼Œè´·æ¬¾æ–¹å¼ä¸å˜ï¼Œ 2023-10-11æå‰è¿˜æ¬¾10ä¸‡å¹¶ç¼©çŸ­å¹´é™(<code>å®é™…ç›®å‰é“¶è¡Œæ”¿ç­–ä¸å…è®¸</code>)ï¼Œ 2025-10-12æå‰è¿˜æ¬¾10ä¸‡å¹¶ä¿®æ”¹ä¸ºç­‰é¢æœ¬é‡‘æ–¹å¼ï¼Œ 2026-10-14æå‰è¿˜æ¬¾10ä¸‡å¹¶ä»¥ç­‰é¢æœ¬é‡‘æ–¹å¼+ç¼©çŸ­å¹´é™(<code>å®é™…ç›®å‰é“¶è¡Œæ”¿ç­–ä¸å…è®¸</code>)ã€‚</p><p>è®¡ç®—ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">var</span> <span class="token punctuation">(</span>totalInterest<span class="token punctuation">,</span> actualInterest<span class="token punctuation">,</span> savedInterest<span class="token punctuation">,</span> totalRepayment<span class="token punctuation">,</span> actualPayment<span class="token punctuation">,</span> paymentPlans<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LoanModel</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">0.0627m</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2021-2-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    RateAdjustments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">,</span> <span class="token keyword">decimal</span><span class="token punctuation">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DateTime<span class="token punctuation">.</span>Parse</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;2022-1-1&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0592m</span><span class="token punctuation">,</span> <span class="token comment">// è°ƒæ•´å‰æœˆä¾›6170.19ï¼Œè°ƒæ•´åæœˆä¾›5948.53</span>
        <span class="token punctuation">[</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2023-1-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.058m</span><span class="token punctuation">,</span> <span class="token comment">// è°ƒæ•´å‰æœˆä¾›5948.53ï¼Œè°ƒæ•´åæœˆä¾›5273.92</span>
        <span class="token punctuation">[</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2023-9-25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.043m</span><span class="token punctuation">,</span> <span class="token comment">// è°ƒæ•´å‰æœˆä¾›5273.92ï¼Œè°ƒæ•´åæœˆä¾›4496.91ï¼Œè°ƒæ•´æ¬¡æœˆè¿˜æ¬¾5118.55</span>
        <span class="token punctuation">[</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2025-1-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.042m</span><span class="token punctuation">,</span> <span class="token comment">// è°ƒæ•´å‰æœˆä¾›4496.91ï¼Œè°ƒæ•´åé¦–æœˆ4457.15</span>
        <span class="token punctuation">[</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2026-1-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.041m</span><span class="token punctuation">,</span> <span class="token comment">// è°ƒæ•´å‰æœˆä¾›4762.47ï¼Œè°ƒæ•´åæœˆä¾›4702ï¼Œè°ƒæ•´æ¬¡æœˆè¿˜æ¬¾8.87å…ƒ(è¿˜æ¬¾æ–¹å¼æ”¹ä¸ºäº†ç­‰é¢æœ¬é‡‘)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    Prepayments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>PrepaymentOption<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">new</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2022-10-23&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000m</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> LoanType<span class="token punctuation">.</span>EquivalentInterest<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æå‰è¿˜æ¬¾å‰æœˆä¾›5948.53ï¼Œæå‰è¿˜æ¬¾åæœˆä¾›5339.85</span>
        <span class="token keyword">new</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2023-10-11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000m</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> LoanType<span class="token punctuation">.</span>EquivalentInterest<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æå‰è¿˜æ¬¾å‰æœˆä¾›5273.92ï¼Œæå‰è¿˜æ¬¾åæœˆä¾›4493.84ï¼ŒæœŸæ•°å‡å°‘64æœŸ</span>
        <span class="token keyword">new</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2025-10-12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000m</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> LoanType<span class="token punctuation">.</span>EquivalentPrincipal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æå‰è¿˜æ¬¾å‰æœˆä¾›4771.56ï¼Œæå‰è¿˜æ¬¾åæœˆä¾›é¦–æœˆ4762.47ï¼Œæ¯æœˆé€’å‡60.4å…ƒ</span>
        <span class="token keyword">new</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">&quot;2026-10-14&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000m</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> LoanType<span class="token punctuation">.</span>EquivalentPrincipal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æå‰è¿˜æ¬¾å‰æœˆä¾›4260.28ï¼Œæå‰è¿˜æ¬¾åæœˆä¾›é¦–æœˆ4251.44ï¼Œæ¯æœˆé€’å‡8.84å…ƒï¼ŒæœŸæ•°å‡å°‘38æœŸ</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Payment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¡ç®—ç»“æœï¼š æ€»åˆ©æ¯totalInterestï¼š1221266.8 å®é™…æ”¯ä»˜åˆ©æ¯actualInterestï¼š403845.58 æå‰è¿˜æ¬¾èŠ‚çœåˆ©æ¯savedInterestï¼š817421.22 æ€»æå‰è¿˜æ¬¾totalRepaymentï¼š400000.00 å®é™…è¿˜æ¬¾æ€»é¢actualPaymentï¼š1403845.58 æ€»è¿˜æ¬¾æœŸæ•°paymentPlansï¼š258æœŸï¼Œ<strong>Listç±»å‹ï¼Œæ¯æ¡è®°å½•å¯ä»¥å±•ç¤ºå½“æœŸçš„åˆ©ç‡ï¼Œåˆ©æ¯ï¼Œæœ¬é‡‘ï¼Œå‰©ä½™æœ¬é‡‘ç­‰ä¿¡æ¯</strong></p><h1 id="asp-net-mvcå’Œasp-net-coreçš„æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½çš„resumefileresult" tabindex="-1"><a class="header-anchor" href="#asp-net-mvcå’Œasp-net-coreçš„æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½çš„resumefileresult" aria-hidden="true">#</a> Asp.Net MVCå’ŒAsp.Net Coreçš„æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½çš„ResumeFileResult</h1><p>åœ¨ASP.NET Coreä¸­é€šè¿‡MVC/WebAPIåº”ç”¨ç¨‹åºä¼ è¾“æ–‡ä»¶æ•°æ®æ—¶ä½¿ç”¨æ–­ç‚¹ç»­ä¼ ä»¥åŠå¤šçº¿ç¨‹ä¸‹è½½æ”¯æŒã€‚</p><p>å®ƒæä¾›äº† <code>ETag</code>æ ‡å¤´ä»¥åŠ <code>Last-Modified</code>æ ‡å¤´ã€‚ å®ƒè¿˜æ”¯æŒä»¥ä¸‹å‰ç½®æ¡ä»¶æ ‡å¤´ï¼š<code>If-Match</code>ï¼Œ<code>If-None-Match</code>ï¼Œ<code>If-Modified-Since</code>ï¼Œ<code>If-Unmodified-Since</code>ï¼Œ<code>If-Range</code>ã€‚</p><h2 id="æ”¯æŒ-asp-net-core-2-0" tabindex="-1"><a class="header-anchor" href="#æ”¯æŒ-asp-net-core-2-0" aria-hidden="true">#</a> æ”¯æŒ ASP.NET Core 2.0+</h2><p>ä».NET Core2.0å¼€å§‹ï¼ŒASP.NET Coreå†…éƒ¨æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚ å› æ­¤åªæ˜¯å¯¹FileResultåšäº†ä¸€äº›æ‰©å±•ã€‚ åªç•™ä¸‹äº†â€œContent-Dispositionâ€ Inlineçš„ä¸€éƒ¨åˆ†ã€‚ æ‰€æœ‰ä»£ç éƒ½ä¾èµ–äºåŸºç¡€.NETç±»ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨" aria-hidden="true">#</a> å¦‚ä½•ä½¿ç”¨</h2><h3 id="net-framework" tabindex="-1"><a class="header-anchor" href="#net-framework" aria-hidden="true">#</a> .NET Framework</h3><p>åœ¨ä½ çš„æ§åˆ¶å™¨ä¸­ï¼Œä½ å¯ä»¥åƒåœ¨ <code>FileResult</code>ä¸€æ ·çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Masuit<span class="token punctuation">.</span>Tools<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Masuit<span class="token punctuation">.</span>Tools<span class="token punctuation">.</span>Mvc<span class="token punctuation">.</span>ResumeFileResult</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">MimeMapper</span> mimeMapper<span class="token operator">=</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MimeMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¨èä½¿ç”¨ä¾èµ–æ³¨å…¥</span>

<span class="token keyword">public</span> <span class="token return-type class-name">ActionResult</span> <span class="token function">ResumeFileResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> path <span class="token operator">=</span> Server<span class="token punctuation">.</span><span class="token function">MapPath</span><span class="token punctuation">(</span><span class="token string">&quot;~/Content/test.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResumeFileResult</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mimeMapper<span class="token punctuation">.</span><span class="token function">GetMimeFromPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span> Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token return-type class-name">ActionResult</span> <span class="token function">ResumeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span><span class="token string">&quot;~/Content/test.mp4&quot;</span><span class="token punctuation">,</span> mimeMapper<span class="token punctuation">.</span><span class="token function">GetMimeFromPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;test.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token return-type class-name">ActionResult</span> <span class="token function">ResumePhysicalFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumePhysicalFile</span><span class="token punctuation">(</span><span class="token string">@&quot;D:/test.mp4&quot;</span><span class="token punctuation">,</span> mimeMapper<span class="token punctuation">.</span><span class="token function">GetMimeFromPath</span><span class="token punctuation">(</span><span class="token string">@&quot;D:/test.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;test.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="asp-net-core" tabindex="-1"><a class="header-anchor" href="#asp-net-core" aria-hidden="true">#</a> Asp.Net Core</h3><p>è¦ä½¿ç”¨ResumeFileResultsï¼Œå¿…é¡»åœ¨ <code>Startup.cs</code>çš„ <code>ConfigureServices</code>æ–¹æ³•è°ƒç”¨ä¸­é…ç½®æœåŠ¡ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Masuit<span class="token punctuation">.</span>Tools<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>ResumeFileResults<span class="token punctuation">.</span>Extensions</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token function">AddResumeFileResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨ä½ çš„æ§åˆ¶å™¨ä¸­ï¼Œä½ å¯ä»¥åƒåœ¨ <code>FileResult</code>ä¸€æ ·çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚</p><details><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Masuit<span class="token punctuation">.</span>Tools<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>ResumeFileResults<span class="token punctuation">.</span>Extensions</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> EntityTag <span class="token operator">=</span> <span class="token string">&quot;\\&quot;TestFile\\&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IHostingEnvironment</span> _hostingEnvironment<span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">DateTimeOffset</span> _lastModified <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTimeOffset</span><span class="token punctuation">(</span><span class="token number">2016</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> TimeSpan<span class="token punctuation">.</span>Zero<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// </span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hostingEnvironment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token function">TestController</span><span class="token punctuation">(</span><span class="token class-name">IHostingEnvironment</span> hostingEnvironment<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    _hostingEnvironment <span class="token operator">=</span> hostingEnvironment<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;content/{fileName}/{etag}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FileContent</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> etag<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>File<span class="token punctuation">.</span><span class="token function">ReadAllBytes</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ResumeFileContentResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> fileName <span class="token punctuation">?</span> <span class="token string">&quot;TestFile.txt&quot;</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">etag <span class="token punctuation">?</span></span> EntityTag <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;content/{fileName}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FileContent</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>File<span class="token punctuation">.</span><span class="token function">ReadAllBytes</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResumeFileContentResult</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FileInlineName <span class="token operator">=</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span>
        LastModified <span class="token operator">=</span> _lastModified
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpHead</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FileHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">ResumeVirtualFileResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span><span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> EntityTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPut</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FilePut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">ResumeVirtualFileResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span><span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> EntityTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;stream/{fileName}/{etag}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FileStream</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> etag<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>
    <span class="token class-name">FileStream</span> stream <span class="token operator">=</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>File<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ResumeFileStreamResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> fileName <span class="token punctuation">?</span> <span class="token string">&quot;TestFile.txt&quot;</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">etag <span class="token punctuation">?</span></span> EntityTag <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;stream/{fileName}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">FileStream</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>
    <span class="token class-name">FileStream</span> stream <span class="token operator">=</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>File<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResumeFileStreamResult</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FileInlineName <span class="token operator">=</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span>
        LastModified <span class="token operator">=</span> _lastModified
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;physical/{fileName}/{etag}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">PhysicalFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> etag<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>

    <span class="token class-name">ResumePhysicalFileResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumePhysicalFile</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> fileName <span class="token punctuation">?</span> <span class="token string">&quot;TestFile.txt&quot;</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">etag <span class="token punctuation">?</span></span> EntityTag <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;physical/{fileName}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">PhysicalFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">string</span></span> webRoot <span class="token operator">=</span> _hostingEnvironment<span class="token punctuation">.</span>WebRootPath<span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResumePhysicalFileResult</span><span class="token punctuation">(</span>Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>webRoot<span class="token punctuation">,</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FileInlineName <span class="token operator">=</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span>
        LastModified <span class="token operator">=</span> _lastModified
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;virtual/{fileName}/{etag}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">VirtualFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> etag<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">ResumeVirtualFileResult</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeFile</span><span class="token punctuation">(</span><span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> fileName <span class="token punctuation">?</span> <span class="token string">&quot;TestFile.txt&quot;</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">etag <span class="token punctuation">?</span></span> EntityTag <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span>LastModified <span class="token operator">=</span> _lastModified<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šç¤ºä¾‹å°†ä¸ºæ‚¨çš„æ•°æ®æä¾›â€œContent-Dispositionï¼šattachmentâ€ã€‚ å½“æ²¡æœ‰æä¾›fileNameæ—¶ï¼Œæ•°æ®å°†ä½œä¸ºâ€œContent-Dispositionï¼šinlineâ€æä¾›ã€‚ å¦å¤–ï¼Œå®ƒå¯ä»¥æä¾› <code>ETag</code>å’Œ <code>LastModified</code>æ ‡å¤´ã€‚</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;virtual/{fileName}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">VirtualFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> fileName<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResumeVirtualFileResult</span><span class="token punctuation">(</span><span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FileInlineName <span class="token operator">=</span> <span class="token string">&quot;TestFile.txt&quot;</span><span class="token punctuation">,</span>
        LastModified <span class="token operator">=</span> _lastModified
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,241),o=[e];function c(l,u){return s(),a("div",null,o)}const k=n(p,[["render",c],["__file","Use.html.vue"]]);export{k as default};
